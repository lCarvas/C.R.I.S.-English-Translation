import {
  d as L,
  f as W,
  o as t,
  c as o,
  a as e,
  m as _,
  t as D,
  H as Pa,
  L as pe,
  k as P,
  v as T,
  p as K,
  b as Q,
  _ as F,
  M as fe,
  n as X,
  q as ee,
  N as G,
  P as U,
  r as M,
  C as qe,
  D as Ge,
  E as Ke,
  J as He,
  g as Qe,
  a2 as ie,
  h as je,
  e as qa,
  R as Ga,
  F as Ka,
  B as Qa,
  l as lt,
  Q as ja,
  i as za,
  x as se,
  K as it,
  u as ct,
  S as ut,
  A as dt,
  $ as Ue,
  a0 as vt,
  w as De,
  a6 as z,
  T as Le,
} from "./index-t0mq17pV.js";
import { L as mt } from "./LoadingView-_iqLshHh.js";
import {
  I as ne,
  n as ht,
  A as pt,
  F as Wa,
  a as bt,
  c as wa,
  C as Na,
  r as ft,
  T as gt,
  b as _t,
  d as Ct,
  f as $t,
  e as kt,
} from "./ToastAttack-8Z2---o2.js";
import { T as Me } from "./TabNav-bhLeyoEJ.js";
import { S as be } from "./SwitchButtonBool-R2SsgvuJ.js";
import { _ as Te } from "./d20-icon-vaz1En3o.js";
import { C as St } from "./CombatCard-CYDp1I5J.js";
import { _ as Rt } from "./exit-icon-7lL51GVi.js";
import { C as yt, A as It } from "./ActionModal-FRAMR0H0.js";
import { R as At } from "./RitualCard-mpDhD8kx.js";
import {
  A as Dt,
  K as Mt,
  E as Ht,
  D as Tt,
  B as Pt,
  F as wt,
  R as Nt,
  T as Et,
  c as Bt,
} from "./creatures-9x9A3kYE.js";
import { c as Ot } from "./cultoDaCriacaoContent-lXBbI8k2.js";
import { m as Vt } from "./marcasFragmentadas-_RuPgcFI.js";
import { C as Ut } from "./CreatureCard-zUyn3uiJ.js";
import { S as Lt } from "./SearchInput-JwrnRX4j.js";
import { S as Ft } from "./SourcesNavigation-xVQcEwa1.js";
import { g as qt } from "./parceitosData-_Ek6zqzz.js";
import { u as Gt, d as Kt, D as he } from "./dice-roll-pki3JKwp.js";
import { T as Qt } from "./ToastNotification-4wp0r3IV.js";
import { C as jt } from "./CreatureForm-nc-Zx2hW.js";
import { s as Ea } from "./characterAutomations-VjVSWhq1.js";
import { v as Fe } from "./v4-cyCr5FZV.js";
import "./edit-icon-3vZQUsyW.js";
import "./attributes-I0efBVjK.js";
import "./show-more-icon-VvUXKiHG.js";
import "./creatureData-R8saWVyd.js";
import "./CardSource-eJp3pM5O.js";
import "./default-s9aktn1T.js";
import "./forms-elmqtkmr.js";
import "./lodash-gzw5KmHd.js";
import "./_commonjsHelpers-4gQjN7DL.js";
import "./DropdownSimple-zxeRj9hV.js";
import "./add-icon-fJ4uQHUZ.js";
import "./share-icon-J6b_MEIl.js";
import "./trash-icon-Dl18GMfa.js";
import "./blank-profile-picture-wMh28flS.js";
import "./PictureModal-KjvpKroR.js";
import "./index.esm2017-LS-LQ1N8.js";
import "./browser-image-compression-9kymdGFS.js";
const ae = (u) => (K("data-v-df2547a9"), (u = u()), Q(), u),
  zt = { class: "char-status-card-container" },
  Wt = { class: "header" },
  Xt = { key: 0 },
  Jt = ["src"],
  Yt = { key: 0, class: "agent-name" },
  Zt = { key: 1, class: "agent-name" },
  xt = { class: "basic-info" },
  en = { class: "basic-info" },
  an = { key: 2, class: "basic-combat-info" },
  tn = { key: 0 },
  nn = { key: 1 },
  on = { key: 3, class: "basic-combat-info" },
  sn = { key: 0 },
  rn = { key: 1 },
  ln = { class: "attributes-container" },
  cn = { class: "combat-info" },
  un = ae(() => e("div", null, "AGI", -1)),
  dn = { class: "combat-info-value" },
  vn = { class: "combat-info" },
  mn = ae(() => e("div", null, "STR", -1)),
  hn = { class: "combat-info-value" },
  pn = { class: "combat-info" },
  bn = ae(() => e("div", null, "INT", -1)),
  fn = { class: "combat-info-value" },
  gn = { class: "combat-info" },
  _n = ae(() => e("div", null, "PRE", -1)),
  Cn = { class: "combat-info-value" },
  $n = { class: "combat-info" },
  kn = ae(() => e("div", null, "VIG", -1)),
  Sn = { class: "combat-info-value" },
  Rn = { class: "bars-container" },
  yn = { class: "combat-info-container-first" },
  In = { class: "combat-info-row" },
  An = ae(() => e("div", null, "EP/TURN: ", -1)),
  Dn = { class: "combat-info-value" },
  Mn = { class: "combat-info-row" },
  Hn = ae(() => e("div", null, "SPD: ", -1)),
  Tn = { class: "combat-info-value" },
  Pn = { class: "combat-info-container" },
  wn = { class: "combat-info" },
  Nn = ae(() => e("div", null, "DEFENSE", -1)),
  En = { class: "combat-info-value" },
  Bn = { class: "combat-info" },
  On = ae(() => e("div", null, "BLOCK DR", -1)),
  Vn = { class: "combat-info-value" },
  Un = { class: "combat-info" },
  Ln = ae(() => e("div", null, "DODGE", -1)),
  Fn = { class: "combat-info-value" },
  qn = L({
    __name: "CharStatusCard",
    props: { character: {} },
    setup(u) {
      const y = u,
        k = "https://crisordemparanormal.com/" + "agente/" + y.character.id,
        v = W(() =>
          y.character.movement === 0 ? 0 : y.character.movement / 1.5
        ),
        f = W(() => {
          const i =
            10 +
            y.character.attributes.dex +
            y.character.protectionDefense +
            y.character.bonusDefense;
          return i > 0 ? i : 0;
        }),
        l = W(() => y.character.skills[9].bonus),
        m = W(() => y.character.skills[20].bonus + f.value);
      return (i, I) => (
        t(),
        o("div", zt, [
          e("div", Wt, [
            i.character.sheetPictureURL
              ? (t(),
                o("div", Xt, [
                  e(
                    "img",
                    {
                      class: "card-img",
                      src: i.character.sheetPictureURL,
                      alt: "foto agente",
                    },
                    null,
                    8,
                    Jt
                  ),
                ]))
              : _("", !0),
            e("div", null, [
              i.character.name !== ""
                ? (t(), o("div", Yt, D(i.character.name), 1))
                : (t(), o("div", Zt, " [No Name] ")),
              e("div", xt, D(i.character.className), 1),
              e("div", en, D(i.character.backgroundName), 1),
              i.character.isNexLevelOn
                ? (t(),
                  o("div", on, [
                    Pa(" Level: "),
                    i.character.statsClass !== "Mundane"
                      ? (t(), o("span", sn, D(pe(ht)[i.character.nex]), 1))
                      : (t(), o("span", rn, "0")),
                  ]))
                : (t(),
                  o("div", an, [
                    Pa(" PEX: "),
                    i.character.statsClass !== "Mundane"
                      ? (t(), o("span", tn, D(i.character.nex), 1))
                      : (t(), o("span", nn, "0%")),
                  ])),
            ]),
          ]),
          e("div", ln, [
            e("div", cn, [un, e("div", dn, D(i.character.attributes.dex), 1)]),
            e("div", vn, [mn, e("div", hn, D(i.character.attributes.str), 1)]),
            e("div", pn, [bn, e("div", fn, D(i.character.attributes.int), 1)]),
            e("div", gn, [_n, e("div", Cn, D(i.character.attributes.pre), 1)]),
            e("div", $n, [kn, e("div", Sn, D(i.character.attributes.con), 1)]),
          ]),
          e("div", Rn, [
            P(
              ne,
              {
                type: "pv",
                "disabled-sheet": "",
                "master-screen": "",
                "max-value": i.character.maxPv,
                "current-value": i.character.currentPv,
                marks: i.character.deathMarks,
                "mark-mode": i.character.deathMode,
              },
              null,
              8,
              ["max-value", "current-value", "marks", "mark-mode"]
            ),
            i.character.isPdOn
              ? _("", !0)
              : (t(),
                T(
                  ne,
                  {
                    key: 0,
                    type: "san",
                    "disabled-sheet": "",
                    "master-screen": "",
                    "max-value": i.character.maxSan,
                    "current-value": i.character.currentSan,
                    marks: i.character.madnessMarks,
                    "mark-mode": i.character.madnessMode,
                  },
                  null,
                  8,
                  ["max-value", "current-value", "marks", "mark-mode"]
                )),
            i.character.isPdOn
              ? _("", !0)
              : (t(),
                T(
                  ne,
                  {
                    key: 1,
                    type: "pe",
                    "disabled-sheet": "",
                    "master-screen": "",
                    "max-value": i.character.maxPe,
                    "current-value": i.character.currentPe,
                  },
                  null,
                  8,
                  ["max-value", "current-value"]
                )),
            i.character.isPdOn
              ? (t(),
                T(
                  ne,
                  {
                    key: 2,
                    type: "pd",
                    "disabled-sheet": "",
                    "master-screen": "",
                    "max-value": i.character.maxPd,
                    "current-value": i.character.currentPd,
                    marks: i.character.pdMarks,
                    "mark-mode": i.character.pdMode,
                  },
                  null,
                  8,
                  ["max-value", "current-value", "marks", "mark-mode"]
                ))
              : _("", !0),
          ]),
          e("div", yn, [
            e("div", In, [An, e("span", Dn, D(i.character.peTurn), 1)]),
            e("div", Mn, [
              Hn,
              e(
                "span",
                Tn,
                D(i.character.movement) + "m / " + D(v.value) + "q ",
                1
              ),
            ]),
          ]),
          e("div", Pn, [
            e("div", wn, [Nn, e("div", En, D(f.value), 1)]),
            e("div", Bn, [
              On,
              e("div", Vn, D(i.character.block || l.value), 1),
            ]),
            e("div", Un, [
              Ln,
              e("div", Fn, D(i.character.evade || m.value), 1),
            ]),
          ]),
          e("div", { class: "footer" }, [
            e(
              "a",
              { class: "sheet-link", href: k, target: "_blank" },
              " Sheet "
            ),
          ]),
        ])
      );
    },
  }),
  Gn = F(qn, [["__scopeId", "data-v-df2547a9"]]),
  ze = (u) => (K("data-v-f22e148b"), (u = u()), Q(), u),
  Kn = { key: 0, class: "master-screen-chars-button-container" },
  Qn = { class: "row" },
  jn = ze(() => e("div", { class: "label" }, " Hide agents for players ", -1)),
  zn = { key: 1 },
  Wn = { key: 0, class: "master-screen-chars-container" },
  Xn = { key: 1, class: "no-chars-message" },
  Jn = ze(() => e("h3", null, "There are no agents on this campaign", -1)),
  Yn = [Jn],
  Zn = { key: 2, class: "no-chars-message" },
  xn = ze(() => e("h3", null, "Agents hidden by the GM", -1)),
  eo = [xn],
  ao = L({
    __name: "MasterScreenChars",
    props: { characters: {}, campaign: {}, isDm: { type: Boolean } },
    setup(u) {
      const y = u,
        c = ["OFF", "ON"],
        k = fe(),
        v = (f) => {
          G(U(k, "campaigns", y.campaign.id), { agentsPrivate: f });
        };
      return (f, l) => (
        t(),
        o(
          X,
          null,
          [
            f.isDm
              ? (t(),
                o("div", Kn, [
                  e("div", Qn, [
                    jn,
                    P(
                      be,
                      {
                        value: f.campaign.agentsPrivate || !1,
                        options: c,
                        onHandleChange: v,
                      },
                      null,
                      8,
                      ["value"]
                    ),
                  ]),
                ]))
              : _("", !0),
            !f.campaign.agentsPrivate || f.isDm
              ? (t(),
                o("div", zn, [
                  f.characters.length > 0
                    ? (t(),
                      o("div", Wn, [
                        (t(!0),
                        o(
                          X,
                          null,
                          ee(
                            f.characters,
                            (m) => (
                              t(),
                              o("div", { key: m.id }, [
                                P(Gn, { character: m }, null, 8, ["character"]),
                              ])
                            )
                          ),
                          128
                        )),
                      ]))
                    : (t(), o("div", Xn, Yn)),
                ]))
              : (t(), o("div", Zn, eo)),
          ],
          64
        )
      );
    },
  }),
  Ba = F(ao, [["__scopeId", "data-v-f22e148b"]]),
  We = (u) => (K("data-v-91a251a9"), (u = u()), Q(), u),
  to = { class: "add-dices-button-container" },
  no = { class: "input-container" },
  oo = { class: "roll-dices-container" },
  so = ["onKeyup"],
  ro = We(() =>
    e("img", { class: "dice-icon", src: Te, alt: "rolar" }, null, -1)
  ),
  lo = [ro],
  io = { class: "master-macro-container" },
  co = { class: "master-macro" },
  uo = { class: "master-macro-inputs-container" },
  vo = ["value", "onBlur"],
  mo = ["value", "onBlur"],
  ho = { class: "master-macro-card-buttons-container" },
  po = ["onClick"],
  bo = We(() =>
    e("img", { class: "close-icon", src: He, alt: "fechar" }, null, -1)
  ),
  fo = [bo],
  go = ["onClick"],
  _o = We(() =>
    e("img", { class: "dice-icon", src: Te, alt: "rolar" }, null, -1)
  ),
  Co = [_o],
  $o = L({
    __name: "MasterDices",
    props: { dmPrivateDice: { type: Boolean }, campaign: {} },
    emits: [
      "handleRollMasterDices",
      "handleChangeDmPrivateDice",
      "handleAddDiceMacro",
      "handleRemoveDiceMacro",
      "handleChangeDiceMacro",
      "handleRollDiceMacro",
    ],
    setup(u, { emit: y }) {
      const c = y,
        k = M(""),
        v = () => {
          c("handleRollMasterDices", k.value), (k.value = "");
        },
        f = ["PUBLIC", "PRIVATE"];
      return (l, m) => (
        t(),
        o(
          X,
          null,
          [
            e("div", to, [
              e(
                "button",
                {
                  class: "button-primary",
                  onClick:
                    m[0] || (m[0] = (i) => l.$emit("handleAddDiceMacro")),
                },
                " Add Dice "
              ),
            ]),
            e("div", no, [
              e("div", oo, [
                qe(
                  e(
                    "input",
                    {
                      "onUpdate:modelValue":
                        m[1] || (m[1] = (i) => (k.value = i)),
                      type: "text",
                      class: "roll-dice-input",
                      placeholder: "Roll dice",
                      onKeyup: Ke(v, ["enter"]),
                    },
                    null,
                    40,
                    so
                  ),
                  [[Ge, k.value]]
                ),
                e("button", { class: "dice-button", onClick: v }, lo),
              ]),
              P(
                be,
                {
                  value: l.dmPrivateDice,
                  options: f,
                  onHandleChange:
                    m[2] ||
                    (m[2] = (i) => l.$emit("handleChangeDmPrivateDice", i)),
                },
                null,
                8,
                ["value"]
              ),
            ]),
            e("div", io, [
              (t(!0),
              o(
                X,
                null,
                ee(
                  l.campaign.masterMacros,
                  (i, I) => (
                    t(),
                    o("div", { key: I, class: "master-macro-card" }, [
                      e("div", co, [
                        e("div", uo, [
                          e(
                            "input",
                            {
                              value: i.title,
                              type: "text",
                              class: "master-macro-input-title",
                              placeholder: "Nome",
                              onBlur: (b) =>
                                l.$emit("handleChangeDiceMacro", b, "title", I),
                            },
                            null,
                            40,
                            vo
                          ),
                          e(
                            "input",
                            {
                              value: i.value,
                              type: "text",
                              class: "master-macro-input",
                              placeholder: "Valor",
                              onBlur: (b) =>
                                l.$emit("handleChangeDiceMacro", b, "value", I),
                            },
                            null,
                            40,
                            mo
                          ),
                        ]),
                        e("div", ho, [
                          e(
                            "button",
                            {
                              class: "close-button",
                              onClick: (b) =>
                                l.$emit("handleRemoveDiceMacro", I),
                            },
                            fo,
                            8,
                            po
                          ),
                          e(
                            "button",
                            {
                              class: "dice-button",
                              onClick: (b) => l.$emit("handleRollDiceMacro", I),
                            },
                            Co,
                            8,
                            go
                          ),
                        ]),
                      ]),
                    ])
                  )
                ),
                128
              )),
            ]),
          ],
          64
        )
      );
    },
  }),
  Oa = F($o, [["__scopeId", "data-v-91a251a9"]]),
  Xa = (u) => (K("data-v-56becebc"), (u = u()), Q(), u),
  ko = { class: "initiative-order-container" },
  So = { class: "initiative-header" },
  Ro = { class: "haeder-info" },
  yo = Xa(() => e("div", { class: "header-title" }, " Initiative ", -1)),
  Io = { class: "header-value" },
  Ao = { key: 0, class: "header-buttons" },
  Do = ["disabled"],
  Mo = { class: "initiative-card-container" },
  Ho = ["onClick"],
  To = { key: 0, class: "profile-picture-container" },
  Po = ["src"],
  wo = { key: 1, class: "profile-picture-placeholder" },
  No = { class: "card-info-container" },
  Eo = { class: "card-name" },
  Bo = { class: "card-info-row" },
  Oo = { key: 0, class: "card-life" },
  Vo = { key: 0 },
  Uo = { key: 1 },
  Lo = { key: 1, class: "card-life" },
  Fo = { key: 0 },
  qo = { key: 1 },
  Go = { key: 2, class: "card-pd" },
  Ko = { key: 0 },
  Qo = { key: 1 },
  jo = { key: 3, class: "card-sanity" },
  zo = { key: 0 },
  Wo = { key: 1 },
  Xo = { key: 4, class: "card-effort" },
  Jo = { key: 0 },
  Yo = { key: 1 },
  Zo = { class: "actions-container" },
  xo = { class: "exit-button-container" },
  es = ["onClick"],
  as = Xa(() =>
    e("img", { class: "exit-icon", src: Rt, alt: "sair" }, null, -1)
  ),
  ts = [as],
  ns = { class: "initiative-container" },
  os = ["value", "disabled", "onBlur"],
  ss = L({
    __name: "InitiativeOrder",
    props: {
      currentCombat: {},
      characters: {},
      isDm: { type: Boolean },
      campaign: {},
    },
    emits: [
      "handleSelectSheet",
      "handleChangeInitiative",
      "handleRemoveFromCombat",
      "handleNextTurn",
      "handleBackTurn",
    ],
    setup(u, { emit: y }) {
      const c = u,
        k = y,
        v = Qe(),
        f = W(() => {
          const b = c.characters.concat(c.currentCombat.creatures);
          return (
            b.sort(
              (d, s) => (
                d.initiativeValue || (d.initiativeValue = 0),
                s.initiativeValue || (s.initiativeValue = 0),
                s.initiativeValue - d.initiativeValue
              )
            ),
            b
          );
        }),
        l = (b, d) => {
          const s = b.target.valueAsNumber;
          k("handleChangeInitiative", s, d);
        },
        m = (b) => {
          if (c.isDm) {
            k("handleSelectSheet", b);
            return;
          }
          v.currentUser &&
            v.currentUser.uid ===
              c.characters[c.characters.findIndex((d) => d.id === b)].uid &&
            k("handleSelectSheet", b);
        },
        i = (b, d) => {
          b.vd &&
            c.currentCombat.currentTurn !== void 0 &&
            (d < c.currentCombat.currentTurn &&
              k("handleBackTurn", f.value.length),
            k("handleRemoveFromCombat", b.id));
        },
        I = (b) => {
          var d;
          return !(
            ((d = v.currentUser) == null ? void 0 : d.uid) === b.uid || c.isDm
          );
        };
      return (b, d) => (
        t(),
        o("div", ko, [
          e("div", So, [
            e("div", Ro, [
              yo,
              e(
                "div",
                Io,
                " Current Round: " + D(b.currentCombat.currentRound),
                1
              ),
            ]),
            b.isDm
              ? (t(),
                o("div", Ao, [
                  e(
                    "button",
                    {
                      class: "button-secondary header-button",
                      disabled:
                        b.currentCombat.currentRound === 0 &&
                        b.currentCombat.currentTurn === 0,
                      onClick:
                        d[0] ||
                        (d[0] = (s) =>
                          b.$emit("handleBackTurn", f.value.length)),
                    },
                    " Previous Turn ",
                    8,
                    Do
                  ),
                  e(
                    "button",
                    {
                      class: "button-primary header-button",
                      onClick:
                        d[1] ||
                        (d[1] = (s) =>
                          b.$emit("handleNextTurn", f.value.length)),
                    },
                    " Next Turn "
                  ),
                ]))
              : _("", !0),
          ]),
          e("div", Mo, [
            (t(!0),
            o(
              X,
              null,
              ee(f.value, (s, N) => {
                var $, g, S, p;
                return (
                  t(),
                  o("div", { key: s.id }, [
                    e(
                      "div",
                      {
                        class: ie([
                          "order-card",
                          { "current-turn": b.currentCombat.currentTurn === N },
                        ]),
                        onClick: (A) => m(s.id || ""),
                      },
                      [
                        s.sheetPictureURL
                          ? (t(),
                            o("div", To, [
                              e(
                                "img",
                                {
                                  class: "profile-picture",
                                  src: s.sheetPictureURL,
                                  alt: "foto agente",
                                },
                                null,
                                8,
                                Po
                              ),
                            ]))
                          : (t(), o("div", wo)),
                        e("div", No, [
                          e("div", Eo, D(s.name), 1),
                          e("div", Bo, [
                            s.pvMax
                              ? (t(),
                                o("div", Oo, [
                                  b.campaign.combatPrivateCreatureValues &&
                                  !b.isDm
                                    ? (t(), o("div", Vo, " ?? / ?? "))
                                    : (t(),
                                      o(
                                        "div",
                                        Uo,
                                        D(s.pvCurrent) + " / " + D(s.pvMax),
                                        1
                                      )),
                                ]))
                              : _("", !0),
                            s.maxPv
                              ? (t(),
                                o("div", Lo, [
                                  b.campaign.combatPrivateCharacterValues &&
                                  !b.isDm &&
                                  s.uid !==
                                    (($ = pe(v).currentUser) == null
                                      ? void 0
                                      : $.uid)
                                    ? (t(), o("div", Fo, " ?? / ?? "))
                                    : (t(),
                                      o(
                                        "div",
                                        qo,
                                        D(s.currentPv) + " / " + D(s.maxPv),
                                        1
                                      )),
                                ]))
                              : _("", !0),
                            s.maxPd && s.isPdOn
                              ? (t(),
                                o("div", Go, [
                                  b.campaign.combatPrivateCharacterValues &&
                                  !b.isDm &&
                                  s.uid !==
                                    ((g = pe(v).currentUser) == null
                                      ? void 0
                                      : g.uid)
                                    ? (t(), o("div", Ko, " ?? / ?? "))
                                    : (t(),
                                      o(
                                        "div",
                                        Qo,
                                        D(s.currentPd) + " / " + D(s.maxPd),
                                        1
                                      )),
                                ]))
                              : _("", !0),
                            s.maxSan && !s.isPdOn
                              ? (t(),
                                o("div", jo, [
                                  b.campaign.combatPrivateCharacterValues &&
                                  !b.isDm &&
                                  s.uid !==
                                    ((S = pe(v).currentUser) == null
                                      ? void 0
                                      : S.uid)
                                    ? (t(), o("div", zo, " ?? / ?? "))
                                    : (t(),
                                      o(
                                        "div",
                                        Wo,
                                        D(s.currentSan) + " / " + D(s.maxSan),
                                        1
                                      )),
                                ]))
                              : _("", !0),
                            s.maxPe && !s.isPdOn
                              ? (t(),
                                o("div", Xo, [
                                  b.campaign.combatPrivateCharacterValues &&
                                  !b.isDm &&
                                  s.uid !==
                                    ((p = pe(v).currentUser) == null
                                      ? void 0
                                      : p.uid)
                                    ? (t(), o("div", Jo, " ?? / ?? "))
                                    : (t(),
                                      o(
                                        "div",
                                        Yo,
                                        D(s.currentPe) + " / " + D(s.maxPe),
                                        1
                                      )),
                                ]))
                              : _("", !0),
                          ]),
                        ]),
                        e("div", Zo, [
                          e("div", xo, [
                            s.vd && b.isDm
                              ? (t(),
                                o(
                                  "button",
                                  {
                                    key: 0,
                                    class: "button-naked exit-button",
                                    onClick: (A) => i(s, N),
                                  },
                                  ts,
                                  8,
                                  es
                                ))
                              : _("", !0),
                          ]),
                          e("div", ns, [
                            e(
                              "input",
                              {
                                value: s.initiativeValue,
                                type: "number",
                                class: "sheet-input initiative-input",
                                disabled: I(s),
                                onBlur: (A) => l(A, s.id || ""),
                              },
                              null,
                              40,
                              os
                            ),
                          ]),
                        ]),
                      ],
                      10,
                      Ho
                    ),
                  ])
                );
              }),
              128
            )),
          ]),
        ])
      );
    },
  }),
  rs = F(ss, [["__scopeId", "data-v-56becebc"]]),
  ls = { class: "character-header-container" },
  is = { key: 0 },
  cs = ["src"],
  us = { class: "info-container" },
  ds = { class: "info-row header-row" },
  vs = { class: "data-container" },
  ms = { class: "info-column" },
  hs = ["title"],
  ps = { class: "info-row" },
  bs = { class: "info-text" },
  fs = L({
    __name: "CharacterCombatSheetHeader",
    props: { character: {} },
    setup(u) {
      return (y, c) => (
        t(),
        o("div", ls, [
          e("div", null, [
            y.character.sheetPictureURL
              ? (t(),
                o("div", is, [
                  e(
                    "img",
                    {
                      class: "character-picture",
                      src: y.character.sheetPictureURL,
                      alt: "foto ameaÃ§a",
                    },
                    null,
                    8,
                    cs
                  ),
                ]))
              : _("", !0),
          ]),
          e("div", us, [
            e("div", ds, [
              e("div", vs, [
                e("div", ms, [
                  e(
                    "div",
                    { class: "character-name", title: y.character.name },
                    D(y.character.name),
                    9,
                    hs
                  ),
                  e("div", ps, [
                    e(
                      "div",
                      bs,
                      D(y.character.className) +
                        " - PEX: " +
                        D(y.character.nex),
                      1
                    ),
                  ]),
                ]),
              ]),
            ]),
          ]),
        ])
      );
    },
  }),
  gs = F(fs, [["__scopeId", "data-v-56c4788c"]]),
  Pe = (u) => (K("data-v-33fe2145"), (u = u()), Q(), u),
  _s = { class: "stats-row" },
  Cs = { class: "stats-container" },
  $s = Pe(() => e("div", { class: "stats-label" }, " DEFENSE ", -1)),
  ks = { class: "stats-value" },
  Ss = { class: "stats-container" },
  Rs = Pe(() => e("div", { class: "stats-label" }, " BLOCK DR ", -1)),
  ys = { class: "stats-value" },
  Is = { class: "stats-row" },
  As = { class: "stats-container" },
  Ds = Pe(() => e("div", { class: "stats-label" }, " DODGE ", -1)),
  Ms = { class: "stats-value" },
  Hs = { class: "stats-container" },
  Ts = Pe(() => e("div", { class: "stats-label" }, " SPEED ", -1)),
  Ps = { class: "stats-value" },
  ws = L({
    __name: "CharacterCombatSheetStats",
    props: { character: {} },
    emits: ["handleRollAttribute"],
    setup(u) {
      const y = u,
        c = W(() => {
          const v =
            10 +
            y.character.attributes.dex +
            y.character.protectionDefense +
            y.character.bonusDefense;
          return v > 0 ? v : 0;
        }),
        k = W(() =>
          y.character.movement === 0 ? 0 : y.character.movement / 1.5
        );
      return (v, f) => (
        t(),
        o(
          X,
          null,
          [
            P(
              pt,
              {
                character: v.character,
                "disabled-sheet": !1,
                "combat-sheet": "",
                onHandleRollAttribute:
                  f[0] || (f[0] = (l) => v.$emit("handleRollAttribute", l)),
              },
              null,
              8,
              ["character"]
            ),
            e("div", _s, [
              e("div", Cs, [$s, e("div", ks, D(c.value), 1)]),
              e("div", Ss, [Rs, e("div", ys, D(v.character.block), 1)]),
            ]),
            e("div", Is, [
              e("div", As, [Ds, e("div", Ms, D(v.character.evade), 1)]),
              e("div", Hs, [
                Ts,
                e(
                  "div",
                  Ps,
                  D(v.character.movement) + "m /" + D(k.value) + "q ",
                  1
                ),
              ]),
            ]),
          ],
          64
        )
      );
    },
  }),
  Ns = F(ws, [["__scopeId", "data-v-33fe2145"]]),
  Xe = (u) => (K("data-v-2dfa24dc"), (u = u()), Q(), u),
  Es = { class: "character-combat-container" },
  Bs = { key: 0 },
  Os = { class: "roll-dices-container" },
  Vs = ["onKeyup"],
  Us = Xe(() =>
    e("img", { class: "dice-icon", src: Te, alt: "rolar" }, null, -1)
  ),
  Ls = [Us],
  Fs = { key: 1 },
  qs = { key: 0 },
  Gs = { key: 1, class: "no-content" },
  Ks = Xe(() => e("h3", null, "No attack found", -1)),
  Qs = [Ks],
  js = { key: 2, class: "no-content" },
  zs = Xe(() => e("h3", null, "You have no attacks", -1)),
  Ws = [zs],
  Xs = L({
    __name: "CharacterCombatSheetCombat",
    props: { character: {} },
    emits: [
      "handleOpenAddAttack",
      "handleRemoveAttack",
      "handleEditAttack",
      "handleRollDices",
      "handleRollAttack",
    ],
    setup(u, { emit: y }) {
      const c = u,
        k = y,
        v = M(""),
        f = M(""),
        l = () => {
          k("handleRollDices", v.value, "Result", c.character.skinDice),
            (v.value = "");
        },
        m = (I) => {
          k("handleRollAttack", I);
        },
        i = W(() =>
          [...c.character.attacks].filter((b) => je(b.name, f.value))
        );
      return (I, b) => (
        t(),
        o("div", Es, [
          I.character.attacks.length > 0
            ? (t(),
              o("div", Bs, [
                P(
                  Wa,
                  {
                    value: f.value,
                    width: "100%",
                    placeholder: "Filter attacks",
                    onUpdate: b[0] || (b[0] = (d) => (f.value = d)),
                  },
                  null,
                  8,
                  ["value"]
                ),
              ]))
            : _("", !0),
          e("div", Os, [
            qe(
              e(
                "input",
                {
                  "onUpdate:modelValue": b[1] || (b[1] = (d) => (v.value = d)),
                  type: "text",
                  class: "roll-dice-input",
                  placeholder: "Roll dice",
                  disabled: !1,
                  onKeyup: Ke(l, ["enter"]),
                },
                null,
                40,
                Vs
              ),
              [[Ge, v.value]]
            ),
            e(
              "button",
              {
                class: ie(["dice-button", { disabled: !1 }]),
                disabled: !1,
                onClick: l,
              },
              Ls
            ),
          ]),
          I.character.attacks.length > 0
            ? (t(),
              o("div", Fs, [
                i.value.length > 0
                  ? (t(),
                    o("div", qs, [
                      (t(!0),
                      o(
                        X,
                        null,
                        ee(
                          i.value,
                          (d) => (
                            t(),
                            o("div", { key: d.id, class: "align-card" }, [
                              P(
                                bt,
                                {
                                  id: d.id,
                                  attack: d,
                                  "disabled-edit": "",
                                  onHandleRemoveAttack:
                                    b[2] ||
                                    (b[2] = (s) =>
                                      I.$emit("handleRemoveAttack", s)),
                                  onHandleEdit: (s) =>
                                    I.$emit("handleEditAttack", s),
                                  onHandleRollAttack: m,
                                },
                                null,
                                8,
                                ["id", "attack", "onHandleEdit"]
                              ),
                            ])
                          )
                        ),
                        128
                      )),
                    ]))
                  : (t(), o("div", Gs, Qs)),
              ]))
            : (t(), o("div", js, Ws)),
        ])
      );
    },
  }),
  Js = F(Xs, [["__scopeId", "data-v-2dfa24dc"]]),
  Je = (u) => (K("data-v-163db047"), (u = u()), Q(), u),
  Ys = { class: "character-combat-container" },
  Zs = { key: 0 },
  xs = { class: "roll-dices-container" },
  er = ["onKeyup"],
  ar = Je(() =>
    e("img", { class: "dice-icon", src: Te, alt: "rolar" }, null, -1)
  ),
  tr = [ar],
  nr = { key: 1 },
  or = { key: 0 },
  sr = { key: 1, class: "no-content" },
  rr = Je(() => e("h3", null, "No ritual found", -1)),
  lr = [rr],
  ir = { key: 2, class: "no-content" },
  cr = Je(() => e("h3", null, "You have yet to add a ritual", -1)),
  ur = [cr],
  dr = L({
    __name: "CharacterCombatSheetRituals",
    props: { character: {} },
    emits: [
      "handleOpenAddAttack",
      "handleRemoveAttack",
      "handleEditAttack",
      "handleRollDices",
      "handleRollAttack",
    ],
    setup(u, { emit: y }) {
      const c = u,
        k = y,
        v = M(""),
        f = M(""),
        l = () => {
          k("handleRollDices", v.value, "Result", c.character.skinDice),
            (v.value = "");
        },
        m = (I, b) => {
          k("handleRollDices", b, I, c.character.skinDice), (v.value = "");
        },
        i = W(() =>
          [...c.character.rituals].filter((b) => je(b.name, f.value))
        );
      return (I, b) => (
        t(),
        o("div", Ys, [
          I.character.rituals.length > 0
            ? (t(),
              o("div", Zs, [
                P(
                  Wa,
                  {
                    value: f.value,
                    width: "100%",
                    placeholder: "Filter rituals",
                    onUpdate: b[0] || (b[0] = (d) => (f.value = d)),
                  },
                  null,
                  8,
                  ["value"]
                ),
              ]))
            : _("", !0),
          e("div", xs, [
            qe(
              e(
                "input",
                {
                  "onUpdate:modelValue": b[1] || (b[1] = (d) => (v.value = d)),
                  type: "text",
                  class: "roll-dice-input",
                  placeholder: "Roll dice",
                  disabled: !1,
                  onKeyup: Ke(l, ["enter"]),
                },
                null,
                40,
                er
              ),
              [[Ge, v.value]]
            ),
            e(
              "button",
              {
                class: ie(["dice-button", { disabled: !1 }]),
                disabled: !1,
                onClick: l,
              },
              tr
            ),
          ]),
          I.character.rituals.length > 0
            ? (t(),
              o("div", nr, [
                i.value.length > 0
                  ? (t(),
                    o("div", or, [
                      (t(!0),
                      o(
                        X,
                        null,
                        ee(
                          i.value,
                          (d) => (
                            t(),
                            o("div", { key: d.id, class: "align-card" }, [
                              P(
                                At,
                                {
                                  id: d.id,
                                  ritual: d,
                                  "disabled-edit": "",
                                  "only-show": "",
                                  sheet: "",
                                  onHandleRollRitual:
                                    b[2] || (b[2] = (s, N) => m(s, N)),
                                },
                                null,
                                8,
                                ["id", "ritual"]
                              ),
                            ])
                          )
                        ),
                        128
                      )),
                    ]))
                  : (t(), o("div", sr, lr)),
              ]))
            : (t(), o("div", ir, ur)),
        ])
      );
    },
  }),
  vr = F(dr, [["__scopeId", "data-v-163db047"]]),
  mr = { class: "character-sheet-container" },
  hr = { class: "character-sheet-padding" },
  pr = { class: "info-bar-wrapper" },
  br = { class: "tab-nav-container" },
  fr = { class: "character-sheet-content-container" },
  gr = L({
    __name: "CharacterCombatSheet",
    props: { character: {} },
    emits: ["handleRollAttribute", "handleRollDices", "handleRollAttack"],
    setup(u, { emit: y }) {
      const c = u,
        k = y,
        v = [
          { label: "ATTRIBUTES", value: 0 },
          { label: "ENCOUNTER", value: 1 },
          { label: "RITUALS", value: 2 },
        ],
        f = {
          str: "Strength",
          dex: "Agility",
          int: "Intellect",
          pre: "Presence",
          con: "Vigor",
        },
        l = fe(),
        m = M(1),
        i = (p) => (m.value = p),
        I = (p) => {
          k(
            "handleRollAttribute",
            c.character.attributes[p],
            f[p],
            c.character.name,
            c.character.skinDice
          );
        },
        b = (p, A, a) => {
          k("handleRollDices", p, A, c.character.name, a);
        },
        d = (p) => {
          k("handleRollAttack", c.character, p);
        },
        s = (p, A) => {
          const a = p.target.valueAsNumber;
          wa(c.character, a, A),
            G(U(l, "characters", c.character.id), c.character);
        },
        N = (p, A) => {
          wa(c.character, p, A),
            G(U(l, "characters", c.character.id), c.character);
        },
        $ = (p, A) => {
          p === "pv" &&
            (c.character.deathMarks[A] = !c.character.deathMarks[A]),
            p === "san" &&
              (c.character.madnessMarks[A] = !c.character.madnessMarks[A]),
            p === "pd" && (c.character.pdMarks[A] = !c.character.pdMarks[A]),
            G(U(l, "characters", c.character.id), c.character);
        },
        g = (p) => {
          p === "pv" && (c.character.deathMode = !0),
            p === "san" && (c.character.madnessMode = !0),
            p === "pd" && (c.character.pdMode = !0),
            G(U(l, "characters", c.character.id), c.character);
        },
        S = (p) => {
          p === "pv" &&
            ((c.character.deathMarks = [!1, !1, !1]),
            (c.character.deathMode = !1),
            c.character.currentPv === 0 && (c.character.currentPv = 1)),
            p === "san" &&
              ((c.character.madnessMarks = [!1, !1, !1]),
              (c.character.madnessMode = !1),
              c.character.currentSan === 0 && (c.character.currentSan = 1)),
            p === "pd" &&
              ((c.character.pdMarks = [!1, !1, !1]),
              (c.character.pdMode = !1),
              c.character.currentPd === 0 && (c.character.currentPd = 1)),
            G(U(l, "characters", c.character.id), c.character);
        };
      return (p, A) => (
        t(),
        o("div", mr, [
          P(gs, { character: p.character }, null, 8, ["character"]),
          e("div", hr, [
            e("div", pr, [
              P(
                ne,
                {
                  type: "pv",
                  "max-value": p.character.maxPv,
                  "current-value": p.character.currentPv,
                  marks: p.character.deathMarks,
                  "mark-mode": p.character.deathMode,
                  "combat-sheet": "",
                  onHandleChangeCharNumber: s,
                  onHandleChangeCharNumberButton: N,
                  onHandleChangeCharMark: $,
                  onHandleChangeMarkModeToTrue: g,
                  onHandleMarkHeal: S,
                },
                null,
                8,
                ["max-value", "current-value", "marks", "mark-mode"]
              ),
              p.character.isPdOn
                ? _("", !0)
                : (t(),
                  T(
                    ne,
                    {
                      key: 0,
                      type: "san",
                      character: p.character,
                      "max-value": p.character.maxSan,
                      "current-value": p.character.currentSan,
                      marks: p.character.madnessMarks,
                      "mark-mode": p.character.madnessMode,
                      "combat-sheet": "",
                      onHandleChangeCharNumber: s,
                      onHandleChangeCharNumberButton: N,
                      onHandleChangeCharMark: $,
                      onHandleChangeMarkModeToTrue: g,
                      onHandleMarkHeal: S,
                    },
                    null,
                    8,
                    [
                      "character",
                      "max-value",
                      "current-value",
                      "marks",
                      "mark-mode",
                    ]
                  )),
              p.character.isPdOn
                ? _("", !0)
                : (t(),
                  T(
                    ne,
                    {
                      key: 1,
                      type: "pe",
                      character: p.character,
                      "max-value": p.character.maxPe,
                      "current-value": p.character.currentPe,
                      "combat-sheet": "",
                      onHandleChangeCharNumber: s,
                      onHandleChangeCharNumberButton: N,
                      onHandleChangeCharMark: $,
                      onHandleChangeMarkModeToTrue: g,
                      onHandleMarkHeal: S,
                    },
                    null,
                    8,
                    ["character", "max-value", "current-value"]
                  )),
              p.character.isPdOn
                ? (t(),
                  T(
                    ne,
                    {
                      key: 2,
                      type: "pd",
                      character: p.character,
                      "max-value": p.character.maxPe,
                      "current-value": p.character.currentPe,
                      "combat-sheet": "",
                      onHandleChangeCharNumber: s,
                      onHandleChangeCharNumberButton: N,
                      onHandleChangeCharMark: $,
                      onHandleChangeMarkModeToTrue: g,
                      onHandleMarkHeal: S,
                    },
                    null,
                    8,
                    ["character", "max-value", "current-value"]
                  ))
                : _("", !0),
            ]),
            e("div", br, [
              P(
                Me,
                {
                  "tab-options": v,
                  "current-tab": m.value,
                  onHandleNavigation: i,
                },
                null,
                8,
                ["current-tab"]
              ),
            ]),
            e("div", fr, [
              m.value === 0
                ? (t(),
                  T(
                    Ns,
                    {
                      key: 0,
                      character: p.character,
                      onHandleRollAttribute: I,
                    },
                    null,
                    8,
                    ["character"]
                  ))
                : _("", !0),
              m.value === 1
                ? (t(),
                  T(
                    Js,
                    {
                      key: 1,
                      character: p.character,
                      onHandleRollDices: b,
                      onHandleRollAttack: d,
                    },
                    null,
                    8,
                    ["character"]
                  ))
                : _("", !0),
              m.value === 2
                ? (t(),
                  T(
                    vr,
                    { key: 2, character: p.character, onHandleRollDices: b },
                    null,
                    8,
                    ["character"]
                  ))
                : _("", !0),
            ]),
          ]),
        ])
      );
    },
  }),
  _r = F(gr, [["__scopeId", "data-v-f74165c5"]]),
  Ye = (u) => (K("data-v-e4c7cf35"), (u = u()), Q(), u),
  Cr = { class: "modal-content modal-width" },
  $r = { class: "modal-header" },
  kr = Ye(() => e("h2", null, "Add", -1)),
  Sr = Ye(() =>
    e("img", { class: "close-icon", src: He, alt: "fechar" }, null, -1)
  ),
  Rr = [Sr],
  yr = { class: "modal-body modal-height" },
  Ir = { class: "creatures-list" },
  Ar = { class: "creatures-list-header" },
  Dr = Ye(() => e("div", { class: "creatures-title" }, " Threat List ", -1)),
  Mr = { key: 0, class: "tab-nav-container" },
  Hr = { class: "creature-cards-container creatures-card-mobile" },
  Tr = L({
    __name: "AddCreatureModal",
    emits: ["handleAddToCombat", "handleCloseModal"],
    setup(u, { emit: y }) {
      const c = [
          { label: "All", value: 0 },
          { label: "Knowledge", value: 1 },
          { label: "Energy", value: 2 },
          { label: "Death", value: 3 },
          { label: "Blood", value: 4 },
          { label: "Fear", value: 5 },
          { label: "Reality", value: 6 },
          { label: "Homebrew", value: 7 },
        ],
        k = y,
        v = Qe(),
        f = fe(),
        l = M(0),
        m = M(""),
        i = M(),
        I = M("ordemParanormal"),
        b = M([]),
        d = M([]);
      qa(async () => {
        var a;
        if (!v.currentUser) return;
        const g = Ga(f, "homebrewCreatures"),
          S = Ka(
            g,
            Qa("uid", "==", (a = v.currentUser) == null ? void 0 : a.uid)
          ),
          p = await lt(S),
          A = [];
        for (const Y of p.docs) {
          const B = Y.data();
          (B.id = Y.id), A.push(B);
        }
        (i.value = A), (b.value = await Vt()), (d.value = await qt());
      });
      const s = W(() => {
          let g = [];
          return (
            I.value === "ordemParanormal" && l.value === 0 && (g = Dt),
            I.value === "ordemParanormal" && l.value === 1 && (g = Mt),
            I.value === "ordemParanormal" && l.value === 2 && (g = Ht),
            I.value === "ordemParanormal" && l.value === 3 && (g = Tt),
            I.value === "ordemParanormal" && l.value === 4 && (g = Pt),
            I.value === "ordemParanormal" && l.value === 5 && (g = wt),
            I.value === "ordemParanormal" && l.value === 6 && (g = Nt),
            I.value === "ordemParanormal" &&
              l.value === 7 &&
              (g = i.value || []),
            I.value === "tocaDosMonstros" && (g = Et),
            I.value === "cultoDaCriacao" && (g = Ot),
            I.value === "marcasFragmentadas" && (g = b.value),
            I.value === "grimorioParanormal" && (g = d.value),
            I.value === "comunidade" && (g = Bt),
            g.filter((S) => je(S.name, m.value))
          );
        }),
        N = (g) => {
          (l.value = g), (m.value = "");
        },
        $ = (g) => {
          k("handleAddToCombat", g), k("handleCloseModal");
        };
      return (g, S) => (
        t(),
        o("div", Cr, [
          e("div", $r, [
            kr,
            e(
              "button",
              { onClick: S[0] || (S[0] = (p) => g.$emit("handleCloseModal")) },
              Rr
            ),
          ]),
          e("div", yr, [
            e("div", Ir, [
              P(
                Ft,
                {
                  "current-source": I.value,
                  "show-toca-dos-monstros": "",
                  "show-culto-da-criacao": "",
                  "show-marcas-fragmentadas": "",
                  "show-comunidade": "",
                  "show-grimorio-paranormal": "",
                  onHandleChangeCurrentSource:
                    S[1] || (S[1] = (p) => (I.value = p)),
                },
                null,
                8,
                ["current-source"]
              ),
              e("div", Ar, [
                Dr,
                P(
                  Lt,
                  {
                    value: m.value,
                    small: "",
                    onUpdate: S[2] || (S[2] = (p) => (m.value = p)),
                  },
                  null,
                  8,
                  ["value"]
                ),
                I.value === "ordemParanormal"
                  ? (t(),
                    o("div", Mr, [
                      P(
                        Me,
                        {
                          "current-tab": l.value,
                          "tab-options": c,
                          onHandleNavigation: N,
                        },
                        null,
                        8,
                        ["current-tab"]
                      ),
                    ]))
                  : _("", !0),
              ]),
              e("div", Hr, [
                (t(!0),
                o(
                  X,
                  null,
                  ee(
                    s.value,
                    (p) => (
                      t(),
                      o("div", { key: p.id }, [
                        P(
                          Ut,
                          {
                            creature: p,
                            "is-default": "",
                            "can-add": "",
                            onHandleAdd: (A) => $(p),
                          },
                          null,
                          8,
                          ["creature", "onHandleAdd"]
                        ),
                      ])
                    )
                  ),
                  128
                )),
              ]),
            ]),
          ]),
        ])
      );
    },
  }),
  Pr = F(Tr, [["__scopeId", "data-v-e4c7cf35"]]),
  ge = (u) => (K("data-v-c0f6d99e"), (u = u()), Q(), u),
  wr = { class: "modal-content modal-width" },
  Nr = { class: "modal-header" },
  Er = ge(() => e("h2", null, "Settings", -1)),
  Br = ge(() =>
    e("img", { class: "close-icon", src: He, alt: "fechar" }, null, -1)
  ),
  Or = [Br],
  Vr = { class: "modal-body modal-height" },
  Ur = { class: "row" },
  Lr = ge(() => e("div", { class: "label" }, " Hide threat HP ", -1)),
  Fr = { class: "row" },
  qr = ge(() => e("div", { class: "label" }, " Hide agent attributes ", -1)),
  Gr = { class: "row" },
  Kr = ge(() => e("div", { class: "label" }, " Hide threat dice rolls ", -1)),
  Qr = L({
    __name: "ConfigModal",
    props: { campaign: { type: Object, required: !0 } },
    emits: ["handleCloseModal"],
    setup(u) {
      const y = u,
        c = ["OFF", "ON"],
        k = fe(),
        v = (m) => {
          G(U(k, "campaigns", y.campaign.id), {
            combatPrivateCreatureValues: m,
          });
        },
        f = (m) => {
          G(U(k, "campaigns", y.campaign.id), {
            combatPrivateCharacterValues: m,
          });
        },
        l = (m) => {
          G(U(k, "campaigns", y.campaign.id), { combatPrivateCreatureDice: m });
        };
      return (m, i) => (
        t(),
        o("div", wr, [
          e("div", Nr, [
            Er,
            e(
              "button",
              { onClick: i[0] || (i[0] = (I) => m.$emit("handleCloseModal")) },
              Or
            ),
          ]),
          e("div", Vr, [
            e("div", Ur, [
              Lr,
              P(
                be,
                {
                  value: u.campaign.combatPrivateCreatureValues || !1,
                  options: c,
                  onHandleChange: v,
                },
                null,
                8,
                ["value"]
              ),
            ]),
            e("div", Fr, [
              qr,
              P(
                be,
                {
                  value: u.campaign.combatPrivateCharacterValues || !1,
                  options: c,
                  onHandleChange: f,
                },
                null,
                8,
                ["value"]
              ),
            ]),
            e("div", Gr, [
              Kr,
              P(
                be,
                {
                  value: u.campaign.combatPrivateCreatureDice || !1,
                  options: c,
                  onHandleChange: l,
                },
                null,
                8,
                ["value"]
              ),
            ]),
          ]),
        ])
      );
    },
  }),
  jr = F(Qr, [["__scopeId", "data-v-c0f6d99e"]]),
  Ja = (u) => (K("data-v-18de4cfd"), (u = u()), Q(), u),
  zr = { class: "master-combats-container" },
  Wr = { key: 0, class: "combat-container" },
  Xr = { class: "combat-header" },
  Jr = { class: "combat-name-container" },
  Yr = { class: "combat-name" },
  Zr = { class: "combat-header-buttons" },
  xr = { class: "combat-content-container" },
  el = { class: "initiative-container" },
  al = { class: "combat-sheet-container" },
  tl = { key: 0 },
  nl = { key: 0 },
  ol = { key: 1 },
  sl = { key: 1, class: "no-sheet-text" },
  rl = { key: 0 },
  ll = { key: 1 },
  il = { key: 1 },
  cl = { key: 0 },
  ul = { key: 0, class: "cards-container" },
  dl = { key: 1, class: "no-dm-combat" },
  vl = Ja(() =>
    e(
      "h2",
      null,
      'You have not created any encounter. To create and encounter return to the campaign page on the "encounters" menu',
      -1
    )
  ),
  ml = [vl],
  hl = { key: 1, class: "no-dm-combat" },
  pl = Ja(() =>
    e("h2", null, "Encounters started by the GM will show up here", -1)
  ),
  bl = [pl],
  fl = L({
    __name: "MasterCombats",
    props: {
      campaign: {},
      characters: {},
      isDm: { type: Boolean },
      vtt: { type: Boolean },
    },
    emits: [
      "handleStartCombat",
      "handleFinishCombat",
      "handleRollAttr",
      "handleRollDices",
      "handleRollCharacterAttack",
      "handleRollCreatureAttack",
      "handleAddCreatureCard",
      "handleChangeCreaturePvField",
      "handleChangeCreaturePv",
      "handleRemoveAction",
      "handleEditCreature",
      "handleEditCreatureAction",
      "handleChangeInitiative",
      "handleRollCreatureSkill",
      "handleRemoveFromCombat",
      "handleAddToCombat",
      "handleNextTurn",
      "handleBackTurn",
    ],
    setup(u, { emit: y }) {
      ja((d) => ({ "7aeda60a": b.value }));
      const c = u,
        k = y,
        v = M(),
        f = M(!1),
        l = M(!1),
        m = () => {
          (v.value = void 0), k("handleFinishCombat");
        },
        i = (d) => {
          if (
            !c.campaign.combats ||
            c.campaign.currentCombat === void 0 ||
            c.campaign.currentCombat < 0
          )
            return;
          if (c.campaign.combats[c.campaign.currentCombat].creatures) {
            const N = c.campaign.combats[
              c.campaign.currentCombat
            ].creatures.findIndex(($) => $.id === d);
            N > -1 && (v.value = { index: N, type: "creature" });
          }
          const s = c.characters.findIndex((N) => N.id === d);
          s > -1 && (v.value = { index: s, type: "character" });
        },
        I = W(
          () =>
            !(
              !c.campaign.combats ||
              c.campaign.currentCombat === void 0 ||
              c.campaign.currentCombat < 0
            )
        ),
        b = W(() => (c.vtt ? "102px" : "0"));
      return (d, s) => {
        const N = za("vue-final-modal");
        return (
          t(),
          o("div", zr, [
            d.campaign.combats &&
            d.campaign.currentCombat !== void 0 &&
            d.campaign.currentCombat > -1 &&
            I.value
              ? (t(),
                o("div", Wr, [
                  e("div", Xr, [
                    e("div", Jr, [
                      e(
                        "div",
                        Yr,
                        D(d.campaign.combats[d.campaign.currentCombat].name),
                        1
                      ),
                    ]),
                    e("div", Zr, [
                      d.isDm
                        ? (t(),
                          o(
                            "button",
                            {
                              key: 0,
                              class: "button-secondary",
                              onClick: s[0] || (s[0] = ($) => (l.value = !0)),
                            },
                            " Settings "
                          ))
                        : _("", !0),
                      d.isDm
                        ? (t(),
                          o(
                            "button",
                            { key: 1, class: "button-secondary", onClick: m },
                            " Finish "
                          ))
                        : _("", !0),
                      d.isDm
                        ? (t(),
                          o(
                            "button",
                            {
                              key: 2,
                              class: "button-primary",
                              onClick: s[1] || (s[1] = ($) => (f.value = !0)),
                            },
                            " Add New "
                          ))
                        : _("", !0),
                    ]),
                  ]),
                  e("div", xr, [
                    e("div", el, [
                      P(
                        rs,
                        {
                          characters: d.characters,
                          campaign: d.campaign,
                          "is-dm": d.isDm,
                          "current-combat":
                            d.campaign.combats[d.campaign.currentCombat],
                          onHandleSelectSheet: i,
                          onHandleChangeInitiative:
                            s[2] ||
                            (s[2] = ($, g) =>
                              d.$emit("handleChangeInitiative", $, g)),
                          onHandleRemoveFromCombat:
                            s[3] ||
                            (s[3] = ($) =>
                              d.$emit("handleRemoveFromCombat", $)),
                          onHandleNextTurn:
                            s[4] ||
                            (s[4] = ($) => d.$emit("handleNextTurn", $)),
                          onHandleBackTurn:
                            s[5] ||
                            (s[5] = ($) => d.$emit("handleBackTurn", $)),
                        },
                        null,
                        8,
                        ["characters", "campaign", "is-dm", "current-combat"]
                      ),
                    ]),
                    e("div", al, [
                      v.value
                        ? (t(),
                          o("div", tl, [
                            v.value.type === "creature"
                              ? (t(),
                                o("div", nl, [
                                  P(
                                    yt,
                                    {
                                      creature:
                                        d.campaign.combats[
                                          d.campaign.currentCombat
                                        ].creatures[v.value.index],
                                      onHandleChangePvField:
                                        s[6] ||
                                        (s[6] = ($, g, S) =>
                                          d.$emit(
                                            "handleChangeCreaturePvField",
                                            $,
                                            g,
                                            S
                                          )),
                                      onHandleChangePv:
                                        s[7] ||
                                        (s[7] = ($, g) =>
                                          d.$emit(
                                            "handleChangeCreaturePv",
                                            $,
                                            g
                                          )),
                                      onHandleRollAttribute:
                                        s[8] ||
                                        (s[8] = ($, g, S) =>
                                          d.$emit(
                                            "handleRollAttr",
                                            $,
                                            0,
                                            g,
                                            S,
                                            !0
                                          )),
                                      onHandleAttack:
                                        s[9] ||
                                        (s[9] = ($, g) =>
                                          d.$emit(
                                            "handleRollCreatureAttack",
                                            $,
                                            g
                                          )),
                                      onHandleAdd:
                                        s[10] ||
                                        (s[10] = ($, g) =>
                                          d.$emit(
                                            "handleAddCreatureCard",
                                            $,
                                            g
                                          )),
                                      onHandleRemoveAction:
                                        s[11] ||
                                        (s[11] = ($, g, S) =>
                                          d.$emit(
                                            "handleRemoveAction",
                                            $,
                                            g,
                                            S
                                          )),
                                      onHandleEditCreature:
                                        s[12] ||
                                        (s[12] = ($) =>
                                          d.$emit("handleEditCreature", $)),
                                      onHandleEditCreatureAction:
                                        s[13] ||
                                        (s[13] = ($, g, S) =>
                                          d.$emit(
                                            "handleEditCreatureAction",
                                            $,
                                            g,
                                            S
                                          )),
                                      onHandleRollSkill:
                                        s[14] ||
                                        (s[14] = ($, g, S, p) =>
                                          d.$emit(
                                            "handleRollCreatureSkill",
                                            $,
                                            g,
                                            S,
                                            p
                                          )),
                                    },
                                    null,
                                    8,
                                    ["creature"]
                                  ),
                                ]))
                              : (t(),
                                o("div", ol, [
                                  P(
                                    _r,
                                    {
                                      character: d.characters[v.value.index],
                                      onHandleRollAttribute:
                                        s[15] ||
                                        (s[15] = ($, g, S, p) =>
                                          d.$emit(
                                            "handleRollAttr",
                                            $,
                                            0,
                                            g,
                                            S,
                                            !1,
                                            p
                                          )),
                                      onHandleRollDices:
                                        s[16] ||
                                        (s[16] = ($, g, S, p) =>
                                          d.$emit(
                                            "handleRollDices",
                                            $,
                                            g,
                                            S,
                                            p
                                          )),
                                      onHandleRollAttack:
                                        s[17] ||
                                        (s[17] = ($, g) =>
                                          d.$emit(
                                            "handleRollCharacterAttack",
                                            $,
                                            g
                                          )),
                                    },
                                    null,
                                    8,
                                    ["character"]
                                  ),
                                ])),
                          ]))
                        : (t(),
                          o(
                            "div",
                            sl,
                            " Select one of your sheets on the initiative tracker "
                          )),
                    ]),
                  ]),
                  f.value
                    ? (t(),
                      o("div", rl, [
                        P(
                          N,
                          {
                            modelValue: f.value,
                            "onUpdate:modelValue":
                              s[20] || (s[20] = ($) => (f.value = $)),
                            classes: "modal-container",
                          },
                          {
                            default: se(() => [
                              P(Pr, {
                                onHandleAddToCombat:
                                  s[18] ||
                                  (s[18] = ($) =>
                                    d.$emit("handleAddToCombat", $)),
                                onHandleCloseModal:
                                  s[19] ||
                                  (s[19] = ($) => (f.value = !f.value)),
                              }),
                            ]),
                            _: 1,
                          },
                          8,
                          ["modelValue"]
                        ),
                      ]))
                    : _("", !0),
                  l.value
                    ? (t(),
                      o("div", ll, [
                        P(
                          N,
                          {
                            modelValue: l.value,
                            "onUpdate:modelValue":
                              s[22] || (s[22] = ($) => (l.value = $)),
                            classes: "modal-container",
                          },
                          {
                            default: se(() => [
                              P(
                                jr,
                                {
                                  campaign: d.campaign,
                                  onHandleCloseModal:
                                    s[21] ||
                                    (s[21] = ($) => (l.value = !l.value)),
                                },
                                null,
                                8,
                                ["campaign"]
                              ),
                            ]),
                            _: 1,
                          },
                          8,
                          ["modelValue"]
                        ),
                      ]))
                    : _("", !0),
                ]))
              : (t(),
                o("div", il, [
                  d.isDm
                    ? (t(),
                      o("div", cl, [
                        d.campaign.combats && d.campaign.combats.length > 0
                          ? (t(),
                            o("div", ul, [
                              (t(!0),
                              o(
                                X,
                                null,
                                ee(
                                  d.campaign.combats,
                                  ($, g) => (
                                    t(),
                                    o("div", { key: $.id }, [
                                      P(
                                        St,
                                        {
                                          combat: $,
                                          "is-master-screen": "",
                                          onHandleStart: (S) =>
                                            d.$emit("handleStartCombat", g),
                                        },
                                        null,
                                        8,
                                        ["combat", "onHandleStart"]
                                      ),
                                    ])
                                  )
                                ),
                                128
                              )),
                            ]))
                          : (t(), o("div", dl, ml)),
                      ]))
                    : (t(), o("div", hl, bl)),
                ])),
          ])
        );
      };
    },
  }),
  Va = F(fl, [["__scopeId", "data-v-18de4cfd"]]),
  gl = { class: "textarea-container" },
  _l = ["placeholder", "value", "onBlur"],
  Cl = L({
    __name: "MasterAnotations",
    props: { campaign: {} },
    emits: ["handleChangeCampaignAnotations"],
    setup(u, { emit: y }) {
      const c = y,
        k = [
          {
            title: "General",
            key: "geral",
            placeholder:
              "General information gathered throughout the game session...",
          },
          {
            title: "Future Sessions ",
            key: "previous",
            placeholder: "Notes for possible future events...",
          },
          {
            title: "Previous sessions ",
            key: "next",
            placeholder: "Important events that occurred...",
          },
        ],
        v = (f, l) => {
          const m = { value: f.target.value, key: l };
          c("handleChangeCampaignAnotations", m);
        };
      return (f, l) => (
        t(),
        o(
          X,
          null,
          ee(k, (m) =>
            e("div", { key: m.title }, [
              e("div", gl, [
                e("h3", null, D(m.title), 1),
                e(
                  "textarea",
                  {
                    class: "textarea description-tab-size",
                    rows: "5",
                    placeholder: m.placeholder,
                    value: f.campaign.anotations[m.key],
                    onBlur: (i) => v(i, m.key),
                  },
                  `\r
      `,
                  40,
                  _l
                ),
              ]),
            ])
          ),
          64
        )
      );
    },
  }),
  Ua = F(Cl, [["__scopeId", "data-v-a9aa04a0"]]),
  Ya = (u) => (K("data-v-a513e168"), (u = u()), Q(), u),
  $l = { class: "modal-content modal-width" },
  kl = { class: "modal-header" },
  Sl = Ya(() => e("h2", null, "Threat", -1)),
  Rl = Ya(() =>
    e("img", { class: "close-icon", src: He, alt: "fechar" }, null, -1)
  ),
  yl = [Rl],
  Il = { class: "modal-body modal-height" },
  Al = L({
    __name: "CreatureModal",
    props: { creature: {} },
    emits: ["handleEditCreature", "handleCloseModal"],
    setup(u) {
      return (y, c) => (
        t(),
        o("div", $l, [
          e("div", kl, [
            Sl,
            e(
              "button",
              { onClick: c[0] || (c[0] = (k) => y.$emit("handleCloseModal")) },
              yl
            ),
          ]),
          e("div", Il, [
            P(
              jt,
              {
                creature: y.creature,
                "no-padding": "",
                onHandleEdit:
                  c[1] || (c[1] = (k) => y.$emit("handleEditCreature", k)),
                onHandleClose:
                  c[2] || (c[2] = (k) => y.$emit("handleCloseModal")),
              },
              null,
              8,
              ["creature"]
            ),
          ]),
        ])
      );
    },
  }),
  Dl = F(Al, [["__scopeId", "data-v-a513e168"]]),
  ce = (u) => (K("data-v-72ffa426"), (u = u()), Q(), u),
  Ml = { class: "container" },
  Hl = { key: 0 },
  Tl = { class: "header" },
  Pl = ce(() => e("div", { class: "title" }, " Investigation Sheets ", -1)),
  wl = { class: "sheets-container" },
  Nl = { class: "sheet-name" },
  El = { class: "sheet-buttons-container" },
  Bl = ["onClick"],
  Ol = ["onClick"],
  Vl = { key: 1 },
  Ul = { class: "sheet-header" },
  Ll = { key: 0, class: "sheet-container" },
  Fl = { class: "input-container" },
  ql = ce(() => e("div", { class: "label" }, " Case name ", -1)),
  Gl = ["value"],
  Kl = { class: "input-container" },
  Ql = ce(() => e("div", { class: "label" }, " Summary ", -1)),
  jl = ["value"],
  zl = { class: "input-container" },
  Wl = ce(() => e("div", { class: "label" }, " Objective ", -1)),
  Xl = ["value"],
  Jl = { class: "input-container" },
  Yl = ce(() => e("div", { class: "label" }, " Questions ", -1)),
  Zl = ["value"],
  xl = { class: "input-container" },
  ei = ce(() => e("div", { class: "label" }, " Clues ", -1)),
  ai = ["value"],
  ti = L({
    __name: "InvestigationSheets",
    props: {
      campaign: {},
      isDm: { type: Boolean },
      currentInvestigationSheetIndex: {},
    },
    emits: [
      "handleAddInvestigationSheet",
      "handleRemoveInvestigationSheet",
      "handleSelectInvestigationSheet",
      "handleUnselectInvestigationSheet",
      "handleUpdateInvestigationSheet",
    ],
    setup(u, { emit: y }) {
      const c = y,
        k = (v, f) => {
          const l = v.target.value;
          c("handleUpdateInvestigationSheet", l, f);
        };
      return (v, f) => (
        t(),
        o("div", Ml, [
          v.currentInvestigationSheetIndex === null
            ? (t(),
              o("div", Hl, [
                e("div", Tl, [
                  Pl,
                  v.isDm
                    ? (t(),
                      o(
                        "button",
                        {
                          key: 0,
                          class: "button-primary add-button",
                          onClick:
                            f[0] ||
                            (f[0] = (l) =>
                              v.$emit("handleAddInvestigationSheet")),
                        },
                        " Add New "
                      ))
                    : _("", !0),
                ]),
                e("div", wl, [
                  (t(!0),
                  o(
                    X,
                    null,
                    ee(
                      v.campaign.investigationSheets,
                      (l, m) => (
                        t(),
                        o("div", { key: m, class: "sheet-card" }, [
                          e("div", Nl, D(l.name), 1),
                          e("div", El, [
                            v.isDm
                              ? (t(),
                                o(
                                  "button",
                                  {
                                    key: 0,
                                    class: "button-secondary sheet-button",
                                    onClick: (i) =>
                                      v.$emit(
                                        "handleRemoveInvestigationSheet",
                                        m
                                      ),
                                  },
                                  " Delete ",
                                  8,
                                  Bl
                                ))
                              : _("", !0),
                            e(
                              "button",
                              {
                                class: "button-primary sheet-button",
                                onClick: (i) =>
                                  v.$emit("handleSelectInvestigationSheet", m),
                              },
                              " Open ",
                              8,
                              Ol
                            ),
                          ]),
                        ])
                      )
                    ),
                    128
                  )),
                ]),
              ]))
            : (t(),
              o("div", Vl, [
                e("div", Ul, [
                  e(
                    "button",
                    {
                      class: "button-primary add-button",
                      onClick:
                        f[1] ||
                        (f[1] = (l) =>
                          v.$emit("handleUnselectInvestigationSheet")),
                    },
                    " Return "
                  ),
                ]),
                v.campaign.investigationSheets
                  ? (t(),
                    o("div", Ll, [
                      e("div", Fl, [
                        ql,
                        e(
                          "input",
                          {
                            type: "text",
                            class: "input-primary sheet-input",
                            value:
                              v.campaign.investigationSheets[
                                v.currentInvestigationSheetIndex
                              ].name,
                            onBlur: f[2] || (f[2] = (l) => k(l, "name")),
                          },
                          null,
                          40,
                          Gl
                        ),
                      ]),
                      e("div", Kl, [
                        Ql,
                        e(
                          "textarea",
                          {
                            class: "textarea",
                            rows: "5",
                            value:
                              v.campaign.investigationSheets[
                                v.currentInvestigationSheetIndex
                              ].summary,
                            onBlur: f[3] || (f[3] = (l) => k(l, "summary")),
                          },
                          `\r
          `,
                          40,
                          jl
                        ),
                      ]),
                      e("div", zl, [
                        Wl,
                        e(
                          "textarea",
                          {
                            class: "textarea",
                            rows: "5",
                            value:
                              v.campaign.investigationSheets[
                                v.currentInvestigationSheetIndex
                              ].goal,
                            onBlur: f[4] || (f[4] = (l) => k(l, "goal")),
                          },
                          `\r
          `,
                          40,
                          Xl
                        ),
                      ]),
                      e("div", Jl, [
                        Yl,
                        e(
                          "textarea",
                          {
                            class: "textarea",
                            rows: "5",
                            value:
                              v.campaign.investigationSheets[
                                v.currentInvestigationSheetIndex
                              ].questions,
                            onBlur: f[5] || (f[5] = (l) => k(l, "questions")),
                          },
                          `\r
          `,
                          40,
                          Zl
                        ),
                      ]),
                      e("div", xl, [
                        ei,
                        e(
                          "textarea",
                          {
                            class: "textarea",
                            rows: "10",
                            value:
                              v.campaign.investigationSheets[
                                v.currentInvestigationSheetIndex
                              ].clues,
                            onBlur: f[6] || (f[6] = (l) => k(l, "clues")),
                          },
                          `\r
          `,
                          40,
                          ai
                        ),
                      ]),
                    ]))
                  : _("", !0),
              ])),
        ])
      );
    },
  }),
  La = F(ti, [["__scopeId", "data-v-72ffa426"]]),
  oe = (u) => (K("data-v-f7399d3f"), (u = u()), Q(), u),
  ni = { class: "container" },
  oi = { key: 0 },
  si = { class: "header" },
  ri = oe(() => e("div", { class: "title" }, " Mission reports ", -1)),
  li = { class: "sheets-container" },
  ii = { class: "sheet-name" },
  ci = { class: "sheet-buttons-container" },
  ui = ["onClick"],
  di = ["onClick"],
  vi = { key: 1 },
  mi = { class: "sheet-header" },
  hi = { key: 0, class: "sheet-container" },
  pi = { class: "input-container" },
  bi = oe(() => e("div", { class: "label" }, " Mission ", -1)),
  fi = ["value"],
  gi = { class: "input-container" },
  _i = oe(() => e("div", { class: "label" }, " Team ", -1)),
  Ci = ["value"],
  $i = { class: "input-container" },
  ki = oe(() => e("div", { class: "label" }, " Involved agents ", -1)),
  Si = ["value"],
  Ri = { class: "input-container" },
  yi = oe(() => e("div", { class: "label" }, " Clues found ", -1)),
  Ii = ["value"],
  Ai = { class: "input-container" },
  Di = oe(() => e("div", { class: "label" }, " Casualties ", -1)),
  Mi = ["value"],
  Hi = { class: "input-container" },
  Ti = oe(() => e("div", { class: "label" }, " Mission summary ", -1)),
  Pi = ["value"],
  wi = { class: "result-row" },
  Ni = oe(() => e("div", { class: "label" }, " Mission result: ", -1)),
  Ei = { class: "buttons-container" },
  Bi = L({
    __name: "ReportSheets",
    props: {
      campaign: {},
      isDm: { type: Boolean },
      currentReportSheetIndex: {},
    },
    emits: [
      "handleAddReportSheet",
      "handleRemoveReportSheet",
      "handleSelectReportSheet",
      "handleUnselectReportSheet",
      "handleUpdateReportSheet",
    ],
    setup(u, { emit: y }) {
      const c = y,
        k = (l, m) => {
          const i = l.target.value;
          c("handleUpdateReportSheet", i, m);
        },
        v = (l, m) => {
          c("handleUpdateReportSheet", l, m);
        },
        f = (l) => (l === "1" ? "#3d8b40" : l === "0" ? "#d9534f" : "#fff");
      return (l, m) => (
        t(),
        o("div", ni, [
          l.currentReportSheetIndex === null
            ? (t(),
              o("div", oi, [
                e("div", si, [
                  ri,
                  l.isDm
                    ? (t(),
                      o(
                        "button",
                        {
                          key: 0,
                          class: "button-primary add-button",
                          onClick:
                            m[0] ||
                            (m[0] = (i) => l.$emit("handleAddReportSheet")),
                        },
                        " Add New "
                      ))
                    : _("", !0),
                ]),
                e("div", li, [
                  (t(!0),
                  o(
                    X,
                    null,
                    ee(
                      l.campaign.reportSheets,
                      (i, I) => (
                        t(),
                        o(
                          "div",
                          {
                            key: I,
                            class: "sheet-card",
                            style: it({
                              borderLeft: `5px solid ${f(i.missionStatus)}`,
                            }),
                          },
                          [
                            e("div", ii, D(i.missionName), 1),
                            e("div", ci, [
                              l.isDm
                                ? (t(),
                                  o(
                                    "button",
                                    {
                                      key: 0,
                                      class: "button-secondary sheet-button",
                                      onClick: (b) =>
                                        l.$emit("handleRemoveReportSheet", I),
                                    },
                                    " Delete ",
                                    8,
                                    ui
                                  ))
                                : _("", !0),
                              e(
                                "button",
                                {
                                  class: "button-primary sheet-button",
                                  onClick: (b) =>
                                    l.$emit("handleSelectReportSheet", I),
                                },
                                " Open ",
                                8,
                                di
                              ),
                            ]),
                          ],
                          4
                        )
                      )
                    ),
                    128
                  )),
                ]),
              ]))
            : (t(),
              o("div", vi, [
                e("div", mi, [
                  e(
                    "button",
                    {
                      class: "button-primary add-button",
                      onClick:
                        m[1] ||
                        (m[1] = (i) => l.$emit("handleUnselectReportSheet")),
                    },
                    " Return "
                  ),
                ]),
                l.campaign.reportSheets
                  ? (t(),
                    o("div", hi, [
                      e("div", pi, [
                        bi,
                        e(
                          "input",
                          {
                            type: "text",
                            class: "input-primary sheet-input",
                            placeholder: "Mission name",
                            value:
                              l.campaign.reportSheets[l.currentReportSheetIndex]
                                .missionName,
                            onBlur: m[2] || (m[2] = (i) => k(i, "missionName")),
                          },
                          null,
                          40,
                          fi
                        ),
                      ]),
                      e("div", gi, [
                        _i,
                        e(
                          "input",
                          {
                            type: "text",
                            class: "input-primary sheet-input",
                            placeholder: "Team name",
                            value:
                              l.campaign.reportSheets[l.currentReportSheetIndex]
                                .teamName,
                            onBlur: m[3] || (m[3] = (i) => k(i, "teamName")),
                          },
                          null,
                          40,
                          Ci
                        ),
                      ]),
                      e("div", $i, [
                        ki,
                        e(
                          "input",
                          {
                            type: "text",
                            class: "input-primary sheet-input",
                            placeholder:
                              "All agents involved throughout the mission",
                            value:
                              l.campaign.reportSheets[l.currentReportSheetIndex]
                                .teamAgents,
                            onBlur: m[4] || (m[4] = (i) => k(i, "teamAgents")),
                          },
                          null,
                          40,
                          Si
                        ),
                      ]),
                      e("div", Ri, [
                        yi,
                        e(
                          "textarea",
                          {
                            class: "textarea",
                            rows: "5",
                            placeholder:
                              "All clues found throughout the mission",
                            value:
                              l.campaign.reportSheets[l.currentReportSheetIndex]
                                .cluesFounded,
                            onBlur:
                              m[5] || (m[5] = (i) => k(i, "cluesFounded")),
                          },
                          `\r
          `,
                          40,
                          Ii
                        ),
                      ]),
                      e("div", Ai, [
                        Di,
                        e(
                          "textarea",
                          {
                            class: "textarea",
                            rows: "5",
                            placeholder:
                              "Deaths of innocent people, team members, material losses, among others",
                            value:
                              l.campaign.reportSheets[l.currentReportSheetIndex]
                                .causalities,
                            onBlur: m[6] || (m[6] = (i) => k(i, "causalities")),
                          },
                          `\r
          `,
                          40,
                          Mi
                        ),
                      ]),
                      e("div", Hi, [
                        Ti,
                        e(
                          "textarea",
                          {
                            class: "textarea",
                            rows: "5",
                            placeholder: "Mission summary and conclusion",
                            value:
                              l.campaign.reportSheets[l.currentReportSheetIndex]
                                .briefing,
                            onBlur: m[7] || (m[7] = (i) => k(i, "briefing")),
                          },
                          `\r
          `,
                          40,
                          Pi
                        ),
                      ]),
                      e("div", wi, [
                        Ni,
                        e("div", Ei, [
                          e(
                            "button",
                            {
                              id: "hover-button",
                              class: ie([
                                "button-naked mission-button",
                                {
                                  "active-neutro-button":
                                    l.campaign.reportSheets[
                                      l.currentReportSheetIndex
                                    ].missionStatus === "",
                                },
                              ]),
                              onClick:
                                m[8] || (m[8] = (i) => v("", "missionStatus")),
                            },
                            " UNFINISHED ",
                            2
                          ),
                          e(
                            "button",
                            {
                              id: "hover-button",
                              class: ie([
                                "button-naked mission-button",
                                {
                                  "active-success-button":
                                    l.campaign.reportSheets[
                                      l.currentReportSheetIndex
                                    ].missionStatus === "1",
                                },
                              ]),
                              onClick:
                                m[9] || (m[9] = (i) => v("1", "missionStatus")),
                            },
                            " SUCCESS ",
                            2
                          ),
                          e(
                            "button",
                            {
                              id: "hover-button",
                              class: ie([
                                "button-naked mission-button",
                                {
                                  "active-fail-button":
                                    l.campaign.reportSheets[
                                      l.currentReportSheetIndex
                                    ].missionStatus === "0",
                                },
                              ]),
                              onClick:
                                m[10] ||
                                (m[10] = (i) => v("0", "missionStatus")),
                            },
                            " FAILURE ",
                            2
                          ),
                        ]),
                      ]),
                    ]))
                  : _("", !0),
              ])),
        ])
      );
    },
  }),
  Fa = F(Bi, [["__scopeId", "data-v-f7399d3f"]]),
  Oi = (u) => (K("data-v-6313f29a"), (u = u()), Q(), u),
  Vi = { key: 0 },
  Ui = { key: 0, class: "private-master-screen" },
  Li = Oi(() => e("h1", null, "Private GM screen", -1)),
  Fi = { key: 1 },
  qi = { key: 0, class: "screen-master-container" },
  Gi = { class: "screen-master-content" },
  Ki = { class: "small-screen-log-container" },
  Qi = { class: "tab-content-container" },
  ji = { class: "tab-nav-container" },
  zi = { key: 0 },
  Wi = { key: 0 },
  Xi = { key: 0 },
  Ji = { key: 0 },
  Yi = { key: 1, class: "screen-master-container" },
  Zi = { class: "tab-nav-container" },
  xi = { key: 0 },
  ec = { key: 0 },
  ac = { key: 0 },
  tc = { key: 0 },
  nc = { key: 0 },
  oc = { key: 1 },
  sc = { key: 2 },
  rc = { key: 2 },
  lc = { key: 3 },
  ic = { key: 1 },
  cc = L({
    __name: "MasterScreen",
    props: { vtt: { type: Boolean } },
    setup(u) {
      ja((n) => ({ "61d14859": st.value }));
      const y = u,
        { play: c } = Gt(Kt),
        k = [
          { label: "AGENTS", value: 0 },
          { label: "ENCOUNTERS", value: 1 },
          { label: "INVESTIGATION", value: 2 },
          { label: "REPORTS", value: 3 },
        ],
        v = [
          { label: "AGENTS", value: 0 },
          { label: "ENCOUNTERS", value: 1 },
          { label: "INVESTIGATION", value: 2 },
          { label: "REPORTS", value: 3 },
          { label: "DICE", value: 4 },
          { label: "NOTES", value: 5 },
        ],
        f = [
          { label: "LOG", value: 0 },
          { label: "AGENTS", value: 1 },
          { label: "ENCOUNTERS", value: 2 },
          { label: "INVESTIGATION", value: 3 },
          { label: "REPORTS", value: 4 },
        ],
        l = [
          { label: "LOG", value: 0 },
          { label: "AGENTS", value: 1 },
          { label: "ENCOUNTERS", value: 2 },
          { label: "INVESTIGATION", value: 3 },
          { label: "REPORTS", value: 4 },
          { label: "DICE", value: 5 },
          { label: "NOTES", value: 6 },
        ],
        m = Qe(),
        i = fe(),
        I = ct(),
        d = ut().params.id,
        s = M(0),
        N = M(!0),
        $ = M(window.innerWidth),
        g = M(k),
        S = M(!1),
        p = M(!1),
        A = M(0),
        a = M(),
        Y = M([]),
        B = M(),
        ue = M(!1),
        _e = M(!1),
        Ce = M(!1),
        $e = M(),
        ke = M(),
        Se = M("Action"),
        de = M(),
        re = M(null),
        le = M(null),
        we = M(),
        Ne = M(),
        Ee = M(),
        V = M({ message: "", type: "info", alive: !1, timeout: 0 }),
        Z = M({ title: "", total: 0, output: "", notation: "", alive: !1 }),
        w = M({
          title: "",
          totalAttack: 0,
          totalDamage: 0,
          critical: 0,
          attackTooltip: "",
          damageTooltip: "",
          criticalTooltip: "",
          attackRollTooltip: "",
          damageRollTooltip: "",
          alive: !1,
        });
      qa(async () => {
        var R;
        if (!m.currentUser) return;
        const n = await dt(U(i, "campaigns", d));
        n.data() || I.push({ name: "not-found" });
        const r = (R = n.data()) == null ? void 0 : R.campaignLogId;
        (Ne.value = Ue(U(i, "campaigns", d), (H) => {
          var q, j;
          H.data() || I.push({ name: "not-found" }),
            (a.value = H.data()),
            (a.value.id = H.id),
            a.value.privateMasterScreen ? (p.value = !0) : (p.value = !1),
            ((q = m.currentUser) == null ? void 0 : q.uid) === a.value.uid &&
              (S.value = !0),
            $.value >= 1023
              ? S.value
                ? (g.value = v)
                : (g.value = k)
              : S.value
              ? (g.value = l)
              : (g.value = f),
            a.value.combats &&
              a.value.currentCombat &&
              a.value.currentCombat >
                ((j = a.value.combats) == null ? void 0 : j.length) - 1 &&
              (a.value.currentCombat = -1),
            s.value < 3 && s.value++;
        })),
          (Ee.value = Ue(U(i, "campaignLogs", r), (H) => {
            H.data() &&
              ((B.value = H.data()),
              (B.value.id = H.id),
              s.value < 3 && s.value++);
          }));
        const h = Ga(i, "characters"),
          C = Ka(h, Qa("campaignDocId", "==", n.id));
        (we.value = Ue(C, (H) => {
          const q = [];
          for (const j of H.docs) {
            const J = j.data();
            (J.id = j.id), q.push(J);
          }
          (Y.value = q), s.value < 3 && s.value++;
        })),
          window.addEventListener("resize", () => {
            $.value = window.innerWidth;
          });
      }),
        vt(() => {
          we.value && we.value(),
            Ne.value && Ne.value(),
            Ee.value && Ee.value();
        }),
        De(s, () => {
          N.value !== !1 && s.value >= 3 && (N.value = !1);
        });
      const Ze = (n) => (A.value = n),
        E = () => {
          a.value && G(U(i, "campaigns", a.value.id), a.value);
        },
        Za = () => (Z.value.alive = !1),
        xe = () => (w.value.alive = !1),
        Be = (n) => {
          a.value &&
            B.value &&
            (B.value.campaignLogMessages.push(n),
            B.value.campaignLogMessages.length > 200 &&
              B.value.campaignLogMessages.shift(),
            G(U(i, "campaignLogs", B.value.id), B.value));
        },
        ve = (n, r, h, C = !1, R) => {
          try {
            const H = Ct(n),
              q = H.total,
              j = $t(H.output),
              J = kt(H.output);
            (Z.value.title = h),
              (Z.value.total = q),
              (Z.value.output = j),
              (Z.value.notation = J),
              (Z.value.skinDice = R || Ea[4]);
            const Ie = {
              sender: r,
              timestamp: new Date().getTime(),
              content: Z.value,
              contentType: "roll",
              isPrivate: C,
            };
            Be(Ie), Re(), xe(), (Z.value.alive = !0), c();
          } catch {
            (V.value.message = "Invalid dice"),
              (V.value.type = "error"),
              (V.value.alive = !0);
          }
        },
        ea = (n, r) => {
          try {
            const h = ft(n, r);
            (w.value.title = r.name),
              (w.value.totalAttack = h.attackTotal),
              (w.value.totalDamage = h.damageTotal),
              (w.value.critical = h.critical),
              (w.value.attackTooltip = h.attackInfo),
              (w.value.damageTooltip = h.damageInfo),
              (w.value.attackRollTooltip = h.attackRollInfo),
              (w.value.damageRollTooltip = h.damageRollInfo),
              (w.value.criticalTooltip = h.criticalInfo),
              (w.value.skinDice = n.skinDice);
            const C = {
              sender: n.name,
              timestamp: new Date().getTime(),
              content: w.value,
              contentType: "attackRoll",
              isPrivate: !1,
            };
            Be(C), Re(), (w.value.alive = !0), c();
          } catch {
            (V.value.message = "Invalid dice"),
              (V.value.type = "error"),
              (V.value.alive = !0);
          }
        },
        xa = (n) => {
          const r = [];
          if (n.damage)
            for (const C of n.damage) r.push(`(${C.value} - ${C.damageType})`);
          return r.join(" + ");
        },
        et = (n) => {
          const r =
              `${n.rollNumber}d20` +
              (n.rollBonus && !isNaN(n.rollBonus) ? ` +${n.rollBonus}` : ""),
            h = xa(n),
            C = `${n.criticalRange}/x${n.criticalMult}`;
          let R;
          n.rollNumber > 0
            ? (R =
                `${n.rollNumber}d20kh1` +
                (n.rollBonus && !isNaN(n.rollBonus) ? `+${n.rollBonus}` : ""))
            : (R =
                `${Math.abs(n.rollNumber) + 2}d20kl1` +
                (n.rollBonus && !isNaN(n.rollBonus) ? `+${n.rollBonus}` : ""));
          const H = new he(R.trim()),
            q = H.total,
            j = H.output
              .substring(H.output.indexOf("[") + 1, H.output.indexOf("]"))
              .split(",");
          let J = 0;
          if (j.length > 1)
            j.map((O) => {
              O.includes("d") ||
                (parseInt(O) >= n.criticalRange && (J = 1),
                parseInt(O) === 1 && (J = -1),
                parseInt(O) === 1 && n.criticalRange === 1 && (J = 1));
            });
          else {
            const O = H.output.substring(
              H.output.indexOf("[") + 1,
              H.output.indexOf("]")
            );
            parseInt(O) >= n.criticalRange && (J = 1),
              parseInt(O) === 1 && (J = -1);
          }
          const Ie = n.damage[0].value !== "" ? `${n.damage[0].value}` : "0";
          let Ae = 0,
            te = "";
          if (J === 1)
            for (let O = 0; O < n.criticalMult; O++) {
              const x = new he(Ie.trim());
              (Ae += x.total),
                (te +=
                  x.output.substring(
                    x.output.indexOf(":") + 1,
                    x.output.indexOf("=") - 1
                  ) + "+");
            }
          else {
            const O = new he(Ie.trim());
            (Ae += O.total),
              (te +=
                O.output.substring(
                  O.output.indexOf(":") + 1,
                  O.output.indexOf("=") - 1
                ) + "+");
          }
          if (n.damage.length > 1) {
            const O = [];
            for (const rt of n.damage) O.push(rt.value);
            O.splice(0, 1);
            const x = new he(O.join("+"));
            (Ae += x.total),
              x.output.includes("[")
                ? (te +=
                    x.output.substring(
                      x.output.indexOf(":") + 1,
                      x.output.indexOf("=") - 1
                    ) + "+")
                : (te += x.total + "+");
          }
          return (
            te.charAt(te.length - 1) === "+" && (te = te.slice(0, -1)),
            {
              attackTotal: q,
              damageTotal: Ae,
              critical: J,
              attackInfo: r,
              damageInfo: h,
              criticalInfo: C,
              attackRollInfo:
                H.output.substring(
                  H.output.indexOf("["),
                  H.output.indexOf("]") + 1
                ) + (n.rollBonus !== 0 ? `+${n.rollBonus}` : ""),
              damageRollInfo: `${te.trim().replace(/\s/g, "")}`,
            }
          );
        },
        aa = (n, r) => {
          var h;
          try {
            const C = et(r);
            (w.value.title = r.name || "Attack"),
              (w.value.totalAttack = C.attackTotal),
              (w.value.totalDamage = C.damageTotal),
              (w.value.critical = C.critical),
              (w.value.attackTooltip = C.attackInfo),
              (w.value.damageTooltip = C.damageInfo),
              (w.value.attackRollTooltip = C.attackRollInfo),
              (w.value.damageRollTooltip = C.damageRollInfo),
              (w.value.criticalTooltip = C.criticalInfo),
              (w.value.skinDice = Ea[4]);
            const R = {
              sender: n.name,
              timestamp: new Date().getTime(),
              content: w.value,
              contentType: "attackRoll",
              isPrivate:
                ((h = a.value) == null
                  ? void 0
                  : h.combatPrivateCreatureDice) || !1,
            };
            Be(R), Re(), (w.value.alive = !0), c();
          } catch {
            (V.value.message = "Invalid dice"),
              (V.value.type = "error"),
              (V.value.alive = !0);
          }
        },
        ta = (n, r) => {
          if (
            !a.value ||
            !a.value.combats ||
            a.value.currentCombat === void 0 ||
            a.value.currentCombat < 0
          )
            return;
          const h = a.value.combats[a.value.currentCombat].creatures.findIndex(
              (R) => R.id === n.id
            ),
            C = a.value.combats[a.value.currentCombat].creatures[h];
          r === "actions"
            ? C[r].push({ id: Le(), name: "New Action" })
            : C[r].push({ id: Le(), name: "New Power" }),
            E();
        },
        Oe = (n, r = "Result") => {
          ve(n, "GM", r, ue.value);
        };
      De($, () => {
        $.value >= 1023
          ? S.value
            ? (g.value = v)
            : (g.value = k)
          : S.value
          ? (g.value = l)
          : (g.value = f);
      }),
        De(
          () => V.value.alive,
          () => {
            V.value.alive === !0 &&
              (V.value.timeout = window.setTimeout(
                () => (V.value.alive = !1),
                3e3
              ));
          }
        ),
        De(
          () => A.value,
          () => {
            A.value === 0 && (Z.value.alive = !1);
          }
        );
      const Re = () => {
          (V.value.alive = !1), clearTimeout(V.value.timeout);
        },
        na = (n) => {
          a.value && S.value && ((a.value.anotations[n.key] = n.value), E());
        },
        oa = () => {
          var r, h;
          if (!a.value || !S.value) return;
          a.value.masterMacros || (a.value.masterMacros = []);
          const n = { title: "New Die", value: "3d20k1" };
          (h = (r = a.value) == null ? void 0 : r.masterMacros) == null ||
            h.unshift(n),
            E();
        },
        sa = (n) => {
          var r, h;
          (r = a.value) != null &&
            r.masterMacros &&
            ((h = a.value) == null || h.masterMacros.splice(n, 1), E());
        },
        ra = (n, r, h) => {
          var C;
          (C = a.value) != null &&
            C.masterMacros &&
            ((a.value.masterMacros[h][r] = n.target.value), E());
        },
        la = (n) => {
          var C;
          if (!((C = a.value) != null && C.masterMacros)) return;
          const r = a.value.masterMacros[n].value,
            h = a.value.masterMacros[n].title;
          Oe(r, h);
        },
        Ve = (n, r) => {
          let h;
          return (
            n > 0
              ? (h = `${n}d20kh1` + (r !== 0 ? `+${r}` : ""))
              : (h = `${Math.abs(n) + 2}d20kl1` + (r !== 0 ? `+${r}` : "")),
            new he(h.trim()).total
          );
        },
        ia = (n) => {
          if (!a.value || !a.value.combats) return;
          const r = {
            STR: "str",
            AGI: "dex",
            INT: "int",
            PRE: "pre",
            VIG: "con",
          };
          if (
            ((a.value.currentCombat = n),
            !a.value.combats[a.value.currentCombat].combatStarted)
          ) {
            a.value.combats[a.value.currentCombat].currentRound === void 0 &&
              ((a.value.combats[a.value.currentCombat].currentRound = 0),
              (a.value.combats[a.value.currentCombat].currentTurn = 0));
            for (const h of Y.value) {
              const C = h.attributes[r[h.skills[11].attribute]];
              (h.initiativeValue = Ve(C, h.skills[11].bonus)),
                G(U(i, "characters", h.id), h);
            }
            for (const h of a.value.combats[a.value.currentCombat].creatures)
              h.initiativeValue = Ve(
                h.skills.initiative.rollNumber,
                h.skills.initiative.rollBonus || 0
              );
            a.value.combats[a.value.currentCombat].combatStarted = !0;
          }
          E();
        },
        ca = () => {
          a.value && a.value.combats && ((a.value.currentCombat = -1), E());
        },
        ua = (n, r, h, C, R, H) => {
          var j;
          let q;
          n > 0
            ? (q = `${n}d20kh1` + (r !== 0 ? `+${r}` : ""))
            : (q = `${Math.abs(n) + 2}d20kl1` + (r !== 0 ? `+${r}` : "")),
            R
              ? ve(
                  q,
                  C,
                  h,
                  (j = a.value) == null ? void 0 : j.combatPrivateCreatureDice
                )
              : ve(q, C, h, !1, H);
        },
        da = (n, r, h, C) => {
          var H;
          let R;
          n > 0
            ? (R = `${n}d20kh1` + (r !== 0 ? `+${r}` : ""))
            : (R = `${Math.abs(n) + 2}d20kl1` + (r !== 0 ? `+${r}` : "")),
            ve(
              R,
              C,
              h,
              (H = a.value) == null ? void 0 : H.combatPrivateCreatureDice
            );
        },
        va = (n, r, h, C) => {
          ve(n, h, r, !1, C);
        },
        ye = (n, r, h) => {
          if (
            !a.value ||
            !a.value.combats ||
            a.value.currentCombat === void 0 ||
            a.value.currentCombat < 0
          )
            return;
          const C = a.value.combats[a.value.currentCombat].creatures.findIndex(
              (H) => H.id === n.id
            ),
            R = a.value.combats[a.value.currentCombat].creatures[C];
          R &&
            (h || (R.pvCurrent = r),
            h === "current" && (R.pvCurrent = r),
            h === "max" && (R.pvMax = r),
            E());
        },
        ma = (n, r, h) => {
          if (
            !a.value ||
            !a.value.combats ||
            a.value.currentCombat === void 0 ||
            a.value.currentCombat < 0
          )
            return;
          const C = a.value.combats[a.value.currentCombat].creatures.find(
            (R) => R.id === n.id
          );
          if (C) {
            if (h === "actions") {
              const R = C.actions.findIndex((H) => H.id === r);
              R > -1 && C.actions.splice(R, 1);
            } else {
              const R = C.powers.findIndex((H) => H.id === r);
              R > -1 && C.powers.splice(R, 1);
            }
            E();
          }
        },
        ha = (n) => {
          me(), (_e.value = !0), ($e.value = n);
        },
        pa = (n, r, h) => {
          if (
            a.value &&
            a.value.combats &&
            !(a.value.currentCombat === void 0 || a.value.currentCombat < 0)
          )
            if (
              (me(),
              (Ce.value = !0),
              (ke.value = a.value.combats[
                a.value.currentCombat
              ].creatures.findIndex((C) => C.id === n.id)),
              h === "Action")
            ) {
              const C = n.actions.findIndex((R) => R.id === r);
              (de.value = n.actions[C]), (Se.value = "Action");
            } else {
              const C = n.powers.findIndex((R) => R.id === r);
              (de.value = n.powers[C]), (Se.value = "Power");
            }
        },
        at = (n) => {
          if (
            !a.value ||
            !a.value.combats ||
            a.value.currentCombat === void 0 ||
            a.value.currentCombat < 0 ||
            ke.value === void 0
          )
            return;
          const r = a.value.combats[a.value.currentCombat].creatures[ke.value];
          if (Se.value === "Action") {
            const h = r.actions.findIndex((C) => C.id === n.id);
            h > -1 && (r.actions[h] = n);
          } else {
            const h = r.powers.findIndex((C) => C.id === n.id);
            h > -1 && (r.powers[h] = n);
          }
          E(), me();
        },
        ba = () => {
          (_e.value = !1), ($e.value = void 0);
        },
        tt = () => {
          (Ce.value = !1), (de.value = void 0), (ke.value = void 0);
        },
        me = () => {
          ba(), tt();
        },
        nt = (n) => {
          if (
            !a.value ||
            !a.value.combats ||
            a.value.currentCombat === void 0 ||
            a.value.currentCombat < 0
          )
            return;
          const r = a.value.combats[a.value.currentCombat].creatures.findIndex(
            (h) => h.id === n.id
          );
          r < 0 ||
            ((a.value.combats[a.value.currentCombat].creatures[r] = n),
            E(),
            ba());
        },
        fa = (n, r) => {
          if (
            !a.value ||
            !a.value.combats ||
            a.value.currentCombat === void 0 ||
            a.value.currentCombat < 0
          )
            return;
          const h = Y.value.findIndex((R) => R.id === r),
            C = a.value.combats[a.value.currentCombat].creatures.findIndex(
              (R) => R.id === r
            );
          h > -1 &&
            G(U(i, "characters", Y.value[h].id), { initiativeValue: n }),
            C > -1 &&
              ((a.value.combats[a.value.currentCombat].creatures[
                C
              ].initiativeValue = n),
              E());
        },
        ot = () => {
          S.value &&
            B.value &&
            ((B.value.campaignLogMessages = []),
            G(U(i, "campaignLogs", B.value.id), B.value));
        },
        ga = () => {
          var r;
          if (!a.value || !S.value) return;
          const n = {
            name: "New Investigation Sheet",
            summary: "",
            goal: "",
            questions: "",
            clues: "",
          };
          ((r = a.value) != null && r.investigationSheets) ||
            (a.value.investigationSheets = []),
            a.value.investigationSheets.unshift(n),
            E();
        },
        _a = (n) => {
          var r;
          a.value &&
            S.value &&
            ((r = a.value.investigationSheets) == null || r.splice(n, 1), E());
        },
        Ca = (n) => {
          a.value && a.value.investigationSheets && (re.value = n);
        },
        $a = () => {
          a.value && a.value.investigationSheets && (re.value = null);
        },
        ka = (n, r) => {
          a.value &&
            a.value.investigationSheets &&
            re.value !== null &&
            ((a.value.investigationSheets[re.value][r] = n), E());
        },
        Sa = (n) => {
          if (
            !a.value ||
            a.value.currentCombat === void 0 ||
            !a.value.combats ||
            !n
          )
            return;
          const r = a.value.combats[a.value.currentCombat].creatures.findIndex(
            (h) => h.id === n
          );
          a.value.combats[a.value.currentCombat].creatures[r].vd &&
            (a.value.combats[a.value.currentCombat].vdTotal -=
              a.value.combats[a.value.currentCombat].creatures[r].vd),
            a.value.combats[a.value.currentCombat].creatures.splice(r, 1),
            E();
        },
        Ra = (n) => {
          a.value &&
            a.value.currentCombat !== void 0 &&
            a.value.combats &&
            ((n.id = Fe()),
            (n.initiativeValue = Ve(
              n.skills.initiative.rollNumber,
              n.skills.initiative.rollBonus || 0
            )),
            a.value.combats[a.value.currentCombat].creatures.push(n),
            (a.value.combats[a.value.currentCombat].vdTotal += n.vd),
            E());
        },
        ya = (n) => {
          a.value &&
            a.value.currentCombat !== void 0 &&
            a.value.combats &&
            (a.value.combats[a.value.currentCombat].currentTurn < n - 1
              ? a.value.combats[a.value.currentCombat].currentTurn++
              : ((a.value.combats[a.value.currentCombat].currentTurn = 0),
                a.value.combats[a.value.currentCombat].currentRound++),
            E());
        },
        Ia = (n) => {
          a.value &&
            a.value.currentCombat !== void 0 &&
            a.value.combats &&
            (a.value.combats[a.value.currentCombat].currentTurn >= 1
              ? a.value.combats[a.value.currentCombat].currentTurn--
              : ((a.value.combats[a.value.currentCombat].currentTurn = n - 1),
                a.value.combats[a.value.currentCombat].currentRound > 0 &&
                  a.value.combats[a.value.currentCombat].currentRound--),
            E());
        },
        Aa = () => {
          var r;
          if (!a.value || !S.value) return;
          const n = {
            missionName: "New mission report",
            teamName: "",
            teamAgents: "",
            cluesFounded: "",
            causalities: "",
            briefing: "",
            missionStatus: "",
          };
          ((r = a.value) != null && r.reportSheets) ||
            (a.value.reportSheets = []),
            a.value.reportSheets.unshift(n),
            E();
        },
        Da = (n) => {
          var r;
          a.value &&
            S.value &&
            ((r = a.value.reportSheets) == null || r.splice(n, 1), E());
        },
        Ma = (n) => {
          a.value && a.value.reportSheets && (le.value = n);
        },
        Ha = () => {
          a.value && a.value.reportSheets && (le.value = null);
        },
        Ta = (n, r) => {
          a.value &&
            a.value.reportSheets &&
            le.value !== null &&
            ((a.value.reportSheets[le.value][r] = n), E());
        },
        st = W(() => (y.vtt ? "102px" : "0"));
      return (n, r) => {
        var C;
        const h = za("vue-final-modal");
        return N.value
          ? (t(), o("div", ic, [P(mt, { "page-loading": "" })]))
          : (t(),
            o("div", Vi, [
              p.value && !S.value
                ? (t(),
                  o("div", Ui, [
                    Li,
                    e(
                      "button",
                      {
                        class: "button-primary",
                        onClick: r[0] || (r[0] = (R) => n.$router.push("/")),
                      },
                      " Return "
                    ),
                  ]))
                : (t(),
                  o("div", Fi, [
                    $.value >= 1023
                      ? (t(),
                        o("div", qi, [
                          n.vtt
                            ? _("", !0)
                            : (t(),
                              o(
                                "div",
                                {
                                  key: 0,
                                  class: "page-title",
                                  onClick:
                                    r[1] ||
                                    (r[1] = (R) => {
                                      var H;
                                      return n.$router.push({
                                        name: "campaign-page",
                                        params: {
                                          id:
                                            (H = a.value) == null
                                              ? void 0
                                              : H.id,
                                        },
                                      });
                                    }),
                                },
                                D((C = a.value) == null ? void 0 : C.name),
                                1
                              )),
                          e("div", Gi, [
                            e("div", Ki, [
                              B.value
                                ? (t(),
                                  T(
                                    Na,
                                    {
                                      key: 0,
                                      "master-screen": "",
                                      "is-dm": S.value,
                                      "campaign-log": B.value,
                                      onHandleCleanCampaignLog: ot,
                                    },
                                    null,
                                    8,
                                    ["is-dm", "campaign-log"]
                                  ))
                                : _("", !0),
                            ]),
                            e("div", Qi, [
                              e("div", ji, [
                                P(
                                  Me,
                                  {
                                    "tab-options": g.value,
                                    "current-tab": A.value,
                                    onHandleNavigation: Ze,
                                  },
                                  null,
                                  8,
                                  ["tab-options", "current-tab"]
                                ),
                              ]),
                              (t(),
                              T(
                                z,
                                null,
                                [
                                  A.value === 0 && a.value
                                    ? (t(),
                                      T(
                                        Ba,
                                        {
                                          key: 0,
                                          characters: Y.value,
                                          campaign: a.value,
                                          "is-dm": S.value,
                                        },
                                        null,
                                        8,
                                        ["characters", "campaign", "is-dm"]
                                      ))
                                    : _("", !0),
                                ],
                                1024
                              )),
                              (t(),
                              T(
                                z,
                                null,
                                [
                                  A.value === 1 && a.value
                                    ? (t(),
                                      T(
                                        Va,
                                        {
                                          key: 0,
                                          campaign: a.value,
                                          characters: Y.value,
                                          "is-dm": S.value,
                                          vtt: n.vtt,
                                          onHandleStartCombat: ia,
                                          onHandleFinishCombat: ca,
                                          onHandleRollAttr: ua,
                                          onHandleRollCreatureSkill: da,
                                          onHandleRollDices: va,
                                          onHandleRollCharacterAttack: ea,
                                          onHandleRollCreatureAttack: aa,
                                          onHandleAddCreatureCard: ta,
                                          onHandleChangeCreaturePv: ye,
                                          onHandleChangeCreaturePvField: ye,
                                          onHandleRemoveAction: ma,
                                          onHandleEditCreature: ha,
                                          onHandleEditCreatureAction: pa,
                                          onHandleChangeInitiative: fa,
                                          onHandleRemoveFromCombat: Sa,
                                          onHandleAddToCombat: Ra,
                                          onHandleNextTurn: ya,
                                          onHandleBackTurn: Ia,
                                        },
                                        null,
                                        8,
                                        [
                                          "campaign",
                                          "characters",
                                          "is-dm",
                                          "vtt",
                                        ]
                                      ))
                                    : _("", !0),
                                ],
                                1024
                              )),
                              (t(),
                              T(
                                z,
                                null,
                                [
                                  a.value
                                    ? (t(),
                                      o("div", zi, [
                                        A.value === 2
                                          ? (t(),
                                            T(
                                              La,
                                              {
                                                key: 0,
                                                "is-dm": S.value,
                                                campaign: a.value,
                                                "current-investigation-sheet-index":
                                                  re.value,
                                                onHandleAddInvestigationSheet:
                                                  ga,
                                                onHandleRemoveInvestigationSheet:
                                                  _a,
                                                onHandleSelectInvestigationSheet:
                                                  Ca,
                                                onHandleUnselectInvestigationSheet:
                                                  $a,
                                                onHandleUpdateInvestigationSheet:
                                                  ka,
                                              },
                                              null,
                                              8,
                                              [
                                                "is-dm",
                                                "campaign",
                                                "current-investigation-sheet-index",
                                              ]
                                            ))
                                          : _("", !0),
                                      ]))
                                    : _("", !0),
                                ],
                                1024
                              )),
                              (t(),
                              T(
                                z,
                                null,
                                [
                                  a.value
                                    ? (t(),
                                      o("div", Wi, [
                                        A.value === 3
                                          ? (t(),
                                            T(
                                              Fa,
                                              {
                                                key: 0,
                                                campaign: a.value,
                                                "is-dm": S.value,
                                                "current-report-sheet-index":
                                                  le.value,
                                                onHandleAddReportSheet: Aa,
                                                onHandleRemoveReportSheet: Da,
                                                onHandleSelectReportSheet: Ma,
                                                onHandleUnselectReportSheet: Ha,
                                                onHandleUpdateReportSheet: Ta,
                                              },
                                              null,
                                              8,
                                              [
                                                "campaign",
                                                "is-dm",
                                                "current-report-sheet-index",
                                              ]
                                            ))
                                          : _("", !0),
                                      ]))
                                    : _("", !0),
                                ],
                                1024
                              )),
                              (t(),
                              T(
                                z,
                                null,
                                [
                                  a.value
                                    ? (t(),
                                      o("div", Xi, [
                                        A.value === 4
                                          ? (t(),
                                            T(
                                              Oa,
                                              {
                                                key: 0,
                                                "dm-private-dice": ue.value,
                                                campaign: a.value,
                                                onHandleChangeDmPrivateDice:
                                                  r[2] ||
                                                  (r[2] = (R) =>
                                                    (ue.value = R)),
                                                onHandleRollMasterDices: Oe,
                                                onHandleAddDiceMacro: oa,
                                                onHandleRemoveDiceMacro:
                                                  r[3] || (r[3] = (R) => sa(R)),
                                                onHandleChangeDiceMacro: ra,
                                                onHandleRollDiceMacro: la,
                                              },
                                              null,
                                              8,
                                              ["dm-private-dice", "campaign"]
                                            ))
                                          : _("", !0),
                                      ]))
                                    : _("", !0),
                                ],
                                1024
                              )),
                              (t(),
                              T(
                                z,
                                null,
                                [
                                  a.value
                                    ? (t(),
                                      o("div", Ji, [
                                        A.value === 5
                                          ? (t(),
                                            T(
                                              Ua,
                                              {
                                                key: 0,
                                                campaign: a.value,
                                                onHandleChangeCampaignAnotations:
                                                  r[4] || (r[4] = (R) => na(R)),
                                              },
                                              null,
                                              8,
                                              ["campaign"]
                                            ))
                                          : _("", !0),
                                      ]))
                                    : _("", !0),
                                ],
                                1024
                              )),
                            ]),
                          ]),
                        ]))
                      : (t(),
                        o("div", Yi, [
                          e("div", Zi, [
                            P(
                              Me,
                              {
                                "tab-options": g.value,
                                "current-tab": A.value,
                                onHandleNavigation: Ze,
                              },
                              null,
                              8,
                              ["tab-options", "current-tab"]
                            ),
                          ]),
                          A.value === 0
                            ? (t(),
                              o("div", xi, [
                                (t(),
                                T(
                                  z,
                                  null,
                                  [
                                    B.value
                                      ? (t(),
                                        T(
                                          Na,
                                          {
                                            key: 0,
                                            "master-screen": "",
                                            "is-dm": S.value,
                                            "campaign-log": B.value,
                                            vtt: n.vtt,
                                          },
                                          null,
                                          8,
                                          ["is-dm", "campaign-log", "vtt"]
                                        ))
                                      : _("", !0),
                                  ],
                                  1024
                                )),
                              ]))
                            : _("", !0),
                          (t(),
                          T(
                            z,
                            null,
                            [
                              A.value === 1 && a.value
                                ? (t(),
                                  T(
                                    Ba,
                                    {
                                      key: 0,
                                      characters: Y.value,
                                      campaign: a.value,
                                      "is-dm": S.value,
                                    },
                                    null,
                                    8,
                                    ["characters", "campaign", "is-dm"]
                                  ))
                                : _("", !0),
                            ],
                            1024
                          )),
                          (t(),
                          T(
                            z,
                            null,
                            [
                              A.value === 2 && a.value
                                ? (t(),
                                  T(
                                    Va,
                                    {
                                      key: 0,
                                      campaign: a.value,
                                      characters: Y.value,
                                      "is-dm": S.value,
                                      onHandleStartCombat: ia,
                                      onHandleFinishCombat: ca,
                                      onHandleRollAttr: ua,
                                      onHandleRollCreatureSkill: da,
                                      onHandleRollDices: va,
                                      onHandleRollCharacterAttack: ea,
                                      onHandleRollCreatureAttack: aa,
                                      onHandleAddCreatureCard: ta,
                                      onHandleChangeCreaturePv: ye,
                                      onHandleChangeCreaturePvField: ye,
                                      onHandleRemoveAction: ma,
                                      onHandleEditCreature: ha,
                                      onHandleEditCreatureAction: pa,
                                      onHandleChangeInitiative: fa,
                                      onHandleRemoveFromCombat: Sa,
                                      onHandleAddToCombat: Ra,
                                      onHandleNextTurn: ya,
                                      onHandleBackTurn: Ia,
                                    },
                                    null,
                                    8,
                                    ["campaign", "characters", "is-dm"]
                                  ))
                                : _("", !0),
                            ],
                            1024
                          )),
                          (t(),
                          T(
                            z,
                            null,
                            [
                              a.value
                                ? (t(),
                                  o("div", ec, [
                                    A.value === 3
                                      ? (t(),
                                        T(
                                          La,
                                          {
                                            key: 0,
                                            "is-dm": S.value,
                                            campaign: a.value,
                                            "current-investigation-sheet-index":
                                              re.value,
                                            onHandleAddInvestigationSheet: ga,
                                            onHandleRemoveInvestigationSheet:
                                              _a,
                                            onHandleSelectInvestigationSheet:
                                              Ca,
                                            onHandleUnselectInvestigationSheet:
                                              $a,
                                            onHandleUpdateInvestigationSheet:
                                              ka,
                                          },
                                          null,
                                          8,
                                          [
                                            "is-dm",
                                            "campaign",
                                            "current-investigation-sheet-index",
                                          ]
                                        ))
                                      : _("", !0),
                                  ]))
                                : _("", !0),
                            ],
                            1024
                          )),
                          (t(),
                          T(
                            z,
                            null,
                            [
                              a.value
                                ? (t(),
                                  o("div", ac, [
                                    A.value === 4
                                      ? (t(),
                                        T(
                                          Fa,
                                          {
                                            key: 0,
                                            campaign: a.value,
                                            "is-dm": S.value,
                                            "current-report-sheet-index":
                                              le.value,
                                            onHandleAddReportSheet: Aa,
                                            onHandleRemoveReportSheet: Da,
                                            onHandleSelectReportSheet: Ma,
                                            onHandleUnselectReportSheet: Ha,
                                            onHandleUpdateReportSheet: Ta,
                                          },
                                          null,
                                          8,
                                          [
                                            "campaign",
                                            "is-dm",
                                            "current-report-sheet-index",
                                          ]
                                        ))
                                      : _("", !0),
                                  ]))
                                : _("", !0),
                            ],
                            1024
                          )),
                          (t(),
                          T(
                            z,
                            null,
                            [
                              a.value
                                ? (t(),
                                  o("div", tc, [
                                    A.value === 5
                                      ? (t(),
                                        T(
                                          Oa,
                                          {
                                            key: 0,
                                            "dm-private-dice": ue.value,
                                            campaign: a.value,
                                            onHandleChangeDmPrivateDice:
                                              r[5] ||
                                              (r[5] = (R) => (ue.value = R)),
                                            onHandleRollMasterDices: Oe,
                                            onHandleAddDiceMacro: oa,
                                            onHandleRemoveDiceMacro:
                                              r[6] || (r[6] = (R) => sa(R)),
                                            onHandleChangeDiceMacro: ra,
                                            onHandleRollDiceMacro: la,
                                          },
                                          null,
                                          8,
                                          ["dm-private-dice", "campaign"]
                                        ))
                                      : _("", !0),
                                  ]))
                                : _("", !0),
                            ],
                            1024
                          )),
                          (t(),
                          T(
                            z,
                            null,
                            [
                              a.value
                                ? (t(),
                                  o("div", nc, [
                                    A.value === 6
                                      ? (t(),
                                        T(
                                          Ua,
                                          {
                                            key: 0,
                                            campaign: a.value,
                                            onHandleChangeCampaignAnotations:
                                              r[7] || (r[7] = (R) => na(R)),
                                          },
                                          null,
                                          8,
                                          ["campaign"]
                                        ))
                                      : _("", !0),
                                  ]))
                                : _("", !0),
                            ],
                            1024
                          )),
                          A.value !== 0
                            ? (t(),
                              o("div", oc, [
                                P(
                                  Le,
                                  { name: "toast" },
                                  {
                                    default: se(() => [
                                      Z.value.alive
                                        ? (t(),
                                          T(
                                            gt,
                                            {
                                              key: 0,
                                              toast: Z.value,
                                              onDismiss: Za,
                                            },
                                            null,
                                            8,
                                            ["toast"]
                                          ))
                                        : _("", !0),
                                    ]),
                                    _: 1,
                                  }
                                ),
                              ]))
                            : _("", !0),
                          A.value !== 0
                            ? (t(),
                              o("div", sc, [
                                P(
                                  Le,
                                  { name: "toast" },
                                  {
                                    default: se(() => [
                                      w.value.alive
                                        ? (t(),
                                          T(
                                            _t,
                                            {
                                              key: 0,
                                              toast: w.value,
                                              onDismiss: xe,
                                            },
                                            null,
                                            8,
                                            ["toast"]
                                          ))
                                        : _("", !0),
                                    ]),
                                    _: 1,
                                  }
                                ),
                              ]))
                            : _("", !0),
                        ])),
                    P(
                      Le,
                      { name: "toast" },
                      {
                        default: se(() => [
                          V.value.alive
                            ? (t(),
                              T(
                                Qt,
                                {
                                  key: 0,
                                  toast: V.value,
                                  type: V.value.type,
                                  onDismiss: Re,
                                },
                                null,
                                8,
                                ["toast", "type"]
                              ))
                            : _("", !0),
                        ]),
                        _: 1,
                      }
                    ),
                    $e.value
                      ? (t(),
                        o("div", rc, [
                          P(
                            h,
                            {
                              modelValue: _e.value,
                              "onUpdate:modelValue":
                                r[8] || (r[8] = (R) => (_e.value = R)),
                              classes: "modal-container",
                            },
                            {
                              default: se(() => [
                                P(
                                  Dl,
                                  {
                                    creature: $e.value,
                                    onHandleEditCreature: nt,
                                    onHandleCloseModal: me,
                                  },
                                  null,
                                  8,
                                  ["creature"]
                                ),
                              ]),
                              _: 1,
                            },
                            8,
                            ["modelValue"]
                          ),
                        ]))
                      : _("", !0),
                    de.value
                      ? (t(),
                        o("div", lc, [
                          P(
                            h,
                            {
                              modelValue: Ce.value,
                              "onUpdate:modelValue":
                                r[9] || (r[9] = (R) => (Ce.value = R)),
                              classes: "modal-container",
                            },
                            {
                              default: se(() => [
                                P(
                                  It,
                                  {
                                    action: de.value,
                                    title: Se.value,
                                    onHandleCloseModal: me,
                                    onHandleEditAction: at,
                                  },
                                  null,
                                  8,
                                  ["action", "title"]
                                ),
                              ]),
                              _: 1,
                            },
                            8,
                            ["modelValue"]
                          ),
                        ]))
                      : _("", !0),
                  ])),
            ]));
      };
    },
  }),
  Jc = F(cc, [["__scopeId", "data-v-6313f29a"]]);
export { Jc as default };
